"use strict";(self.webpackChunkarcgis=self.webpackChunkarcgis||[]).push([[736],{736:(ae,P,a)=>{a.r(P),a.d(P,{default:()=>se});var W=a(15861),u=a(17626),Y=a(85840),l=a(62208);function A(i,r){return U(i)===U(r)}function U(i){if((0,l.Wi)(i))return null;let s=null;return s=null!=i.objectId?i.objectId:null!=i.layer&&"objectIdField"in i.layer&&null!=i.layer.objectIdField&&null!=i.attributes?i.attributes[i.layer.objectIdField]:i.uid,null==s?null:`o-${null!=i.layer?i.layer.id:""}-${s}`}const z={json:{write:{writer:function $(i,r){(0,l.Wi)(i)||null==i.layer?.objectIdField||null==i.attributes||(r.feature={layerId:i.layer.id,objectId:i.attributes[i.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function G(i){if(null!=i.layerId&&null!=i.objectId)return{uid:null,layer:{id:i.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:i.objectId}}}}}}};var D=a(14517),F=a(79608),T=a(86810),d=a(77712),m=(a(90912),a(85931),a(76898)),x=a(128),B=a(72642),N=a(82706);let C=class extends((0,T.eC)((0,F.J)(D.Z))){constructor(i){super(i),this.position=null,this.elevationInfo=null,this.feature=null}equals(i){return(0,l._W)(this.position,i.position)&&(0,l._W)(this.elevationInfo,i.elevationInfo)&&A(this.feature,i.feature)}};(0,u._)([(0,d.Cb)({type:B.Z}),(0,x.B)()],C.prototype,"position",void 0),(0,u._)([(0,d.Cb)({type:N.Z}),(0,x.B)()],C.prototype,"elevationInfo",void 0),(0,u._)([(0,d.Cb)(z)],C.prototype,"feature",void 0),C=(0,u._)([(0,m.j)("esri.analysis.LineOfSightAnalysisObserver")],C);const w=C;let I=class extends((0,T.eC)(F.j)){constructor(i){super(i),this.position=null,this.elevationInfo=null,this.feature=null}equals(i){return(0,l._W)(this.position,i.position)&&(0,l._W)(this.elevationInfo,i.elevationInfo)&&A(this.feature,i.feature)}};(0,u._)([(0,d.Cb)({type:B.Z}),(0,x.B)()],I.prototype,"position",void 0),(0,u._)([(0,d.Cb)({type:N.Z}),(0,x.B)()],I.prototype,"elevationInfo",void 0),(0,u._)([(0,d.Cb)(z)],I.prototype,"feature",void 0),I=(0,u._)([(0,m.j)("esri.analysis.LineOfSightAnalysisTarget")],I);const H=I;var j=a(74333),Z=a(89726),O=a(32917),K=a(54614),L=a(5548);function E(i,r){return function Q(i,r){return(0,l.Wi)(r)||!r.mode?function J(i){return i?ee:te}(i).mode:r.mode}(!!(0,l.pC)(i)&&i.hasZ,r)}a(29505);const ee={mode:"absolute-height",offset:0},te={mode:"on-the-ground",offset:null},R=j.Z.ofType(H);let g=class extends Y.Z{constructor(i){super(i),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,O.YP)(()=>this._computeExtent(),i=>{((0,l.Wi)(i)||(0,l.Wi)(i.pending))&&this._set("extent",(0,l.pC)(i)?i.extent:null)},O.tX))}get targets(){return this._get("targets")||new R}set targets(i){this._set("targets",(0,Z.Z)(i,this.targets,R))}get spatialReference(){return(0,l.pC)(this.observer)&&(0,l.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,l.yw)(this.observer,i=>i.position)]}waitComputeExtent(){var i=this;return(0,W.Z)(function*(){const r=i._computeExtent();return(0,l.pC)(r)?(0,l.Wg)(r.pending):Promise.resolve()})()}_computeExtent(){const i=this.spatialReference;if((0,l.Wi)(this.observer)||(0,l.Wi)(this.observer.position)||(0,l.Wi)(i))return null;const r=v=>"absolute-height"===E(v.position,v.elevationInfo),s=this.observer.position,f=(0,L.al)(s.x,s.y,s.z,s.x,s.y,s.z);for(const v of this.targets)if((0,l.pC)(v.position)){const p=(0,K.dz)(v.position,i);if((0,l.pC)(p.pending))return{pending:p.pending,extent:null};if((0,l.pC)(p.geometry)){const{x:c,y:b,z:le}=p.geometry;(0,L.pp)(f,[c,b,le])}}const y=(0,L.HH)(f,i);return r(this.observer)&&this.targets.every(r)||(y.zmin=void 0,y.zmax=void 0),{pending:null,extent:y}}clear(){this.observer=null,this.targets.removeAll()}};(0,u._)([(0,d.Cb)({type:["line-of-sight"]})],g.prototype,"type",void 0),(0,u._)([(0,d.Cb)({type:w,json:{read:!0,write:!0}})],g.prototype,"observer",void 0),(0,u._)([(0,d.Cb)({cast:Z.R,type:R,nonNullable:!0,json:{read:!0,write:!0}})],g.prototype,"targets",null),(0,u._)([(0,d.Cb)({value:null,readOnly:!0})],g.prototype,"extent",void 0),(0,u._)([(0,d.Cb)({readOnly:!0})],g.prototype,"spatialReference",null),(0,u._)([(0,d.Cb)({readOnly:!0})],g.prototype,"requiredPropertiesForEditing",null),g=(0,u._)([(0,m.j)("esri.analysis.LineOfSightAnalysis")],g);const X=g;var ne=a(99959),ie=a(44917),oe=a(49286);const re=j.Z.ofType(H);let h=class extends((0,oe.q)((0,ne.R)(ie.Z))){constructor(i){super(i),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new X,this.opacity=1}initialize(){this.addHandles((0,O.YP)(()=>this.analysis,(i,r)=>{(0,l.pC)(r)&&r.parent===this&&(r.parent=null),(0,l.pC)(i)&&(i.parent=this)},O.tX))}load(){var i=this;return(0,W.Z)(function*(){return(0,l.pC)(i.analysis)&&i.addResolvingPromise(i.analysis.waitComputeExtent()),i})()}get observer(){return(0,l.yw)(this.analysis,i=>i.observer)}set observer(i){(0,l.yw)(this.analysis,r=>r.observer=i)}get targets(){return(0,l.pC)(this.analysis)?this.analysis.targets:new j.Z}set targets(i){(0,Z.Z)(i,this.analysis?.targets)}get fullExtent(){return(0,l.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,l.pC)(this.analysis)?(0,l.Wg)(this.analysis.spatialReference):null}releaseAnalysis(i){this.analysis===i&&(this.analysis=new X)}};(0,u._)([(0,d.Cb)({json:{read:!1},readOnly:!0})],h.prototype,"type",void 0),(0,u._)([(0,d.Cb)({type:["LineOfSightLayer"]})],h.prototype,"operationalLayerType",void 0),(0,u._)([(0,d.Cb)({type:w,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"observer",null),(0,u._)([(0,d.Cb)({type:re,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"targets",null),(0,u._)([(0,d.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],h.prototype,"analysis",void 0),(0,u._)([(0,d.Cb)({readOnly:!0})],h.prototype,"fullExtent",null),(0,u._)([(0,d.Cb)({readOnly:!0})],h.prototype,"spatialReference",null),(0,u._)([(0,d.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],h.prototype,"opacity",void 0),(0,u._)([(0,d.Cb)({type:["show","hide"]})],h.prototype,"listMode",void 0),h=(0,u._)([(0,m.j)("esri.layers.LineOfSightLayer")],h);const se=h}}]);