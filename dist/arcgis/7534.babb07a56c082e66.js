"use strict";(self.webpackChunkarcgis=self.webpackChunkarcgis||[]).push([[7534,3705],{17196:(W,h,t)=>{t.d(h,{V:()=>e});var s=t(15861),L=t(45205);function e(c,g){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)(function*(c,g){const v=yield(0,L.T)(c,g);v.layers=v.layers.filter(m);const P={serviceJSON:v};if((v.currentVersion??0)<10.5)return P;const I=yield(0,L.T)(c+"/layers",g);return P.layersJSON={layers:I.layers.filter(m),tables:I.tables},P})).apply(this,arguments)}function m(c){return!c.type||"Feature Layer"===c.type}},30164:(W,h,t)=>{t.d(h,{T:()=>L});var s=t(15861);const L={BingMapsLayer:(e=(0,s.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(7805),t.e(773),t.e(9319)]).then(t.bind(t,19319))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return e.apply(this,arguments)}}(),DimensionLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(326)]).then(t.bind(t,90326))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(3327)]).then(t.bind(t,3327))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,80415))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(5964).then(t.bind(t,25964))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(6926),t.e(2863),t.e(1913),t.e(9400)]).then(t.bind(t,99400))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(6926),t.e(8594),t.e(2863),t.e(580),t.e(1913),t.e(8592),t.e(148)]).then(t.bind(t,10148))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(8592),t.e(1370)]).then(t.bind(t,31370))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8411)]).then(t.bind(t,38411))).default});return function(){return e.apply(this,arguments)}}(),LineOfSightLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(736)]).then(t.bind(t,736))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,48887))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9114)]).then(t.bind(t,49114))).default});return function(){return e.apply(this,arguments)}}(),MediaLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9347)]).then(t.bind(t,24762))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1591)]).then(t.bind(t,71591))).default});return function(){return e.apply(this,arguments)}}(),OrientedImageryLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(725).then(t.bind(t,60725))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(8592),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(403),t.e(4940)]).then(t.bind(t,84940))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(7805),t.e(773),t.e(8592),t.e(7559)]).then(t.bind(t,27559))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return e.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(465).then(t.bind(t,20465))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9735)]).then(t.bind(t,59735))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(443)]).then(t.bind(t,10193))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(8592),t.e(6007)]).then(t.bind(t,26007))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(3774),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4223)]).then(t.bind(t,64223))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(8592).then(t.bind(t,28678))).default});return function(){return e.apply(this,arguments)}}()};var e},88755:(W,h,t)=>{t.d(h,{Y:()=>l,h:()=>e});var s=t(21726),L=t(84687);function e(m){return{origin:"portal-item",url:(0,s.mN)(m.itemUrl),portal:m.portal||L.Z.getDefault(),portalItem:m,readResourcePaths:[]}}function l(m){return{origin:"portal-item",messages:[],writtenProperties:[],url:m.itemUrl?(0,s.mN)(m.itemUrl):null,portal:m.portal||L.Z.getDefault(),portalItem:m}}},83705:(W,h,t)=>{t.r(h),t.d(h,{getFirstLayerOrTableId:()=>$,getNumLayersAndTables:()=>N,getSubtypeGroupLayerIds:()=>K,load:()=>G,preprocessFSItemData:()=>C});var s=t(15861),L=t(26584),e=t(44917),l=t(38305),m=t(17196),c=t(84687),g=t(55463),v=t(88755),P=t(37281),I=t(39683),B=t(45205);function G(r,u){return D.apply(this,arguments)}function D(){return D=(0,s.Z)(function*(r,u){const a=r.instance.portalItem;if(a&&a.id)return yield a.load(u),function j(r){const u=r.instance.portalItem;if(!u?.type||!r.supportedTypes.includes(u.type))throw new L.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:u?.type,expectedType:r.supportedTypes.join(", ")})}(r),function J(r,u){return T.apply(this,arguments)}(r,u)}),D.apply(this,arguments)}function T(){return T=(0,s.Z)(function*(r,u){const a=r.instance,y=a.portalItem;if(!y)return;const{url:i,title:f}=y,n=(0,v.h)(y);if("group"===a.type)return a.read({title:f},n),function H(r,u){return E.apply(this,arguments)}(a,r);i&&a.read({url:i},n);const o=yield Z(r,u);return o&&a.read(o,n),a.resourceReferences={portalItem:y,paths:n.readResourcePaths??[]},"subtype-group"!==a.type&&a.read({title:f},n),(0,I.y)(a,n)}),T.apply(this,arguments)}function E(){return E=(0,s.Z)(function*(r,u){let a;const{portalItem:y}=r;if(!y)return;const i=y.type,f=u.layerModuleTypeMap,n=(0,P._$)(y,"Oriented Imagery Layer")??!1;switch(i){case"Feature Service":a=n?f.OrientedImageryLayer:f.FeatureLayer;break;case"Stream Service":a=f.StreamLayer;break;case"Scene Service":a=f.SceneLayer;break;case"Feature Collection":a=f.FeatureLayer;break;default:throw new L.Z("portal:unsupported-item-type-as-group",`The item type '${i}' is not supported as a 'IGroupLayer'`)}let[o,d]=yield Promise.all([a(),Z(u)]),p=()=>o;if("Feature Service"===i){if(d=y.url?yield C(d,y.url):{},K(d).length){const O=f.SubtypeGroupLayer,U=yield O();p=k=>"SubtypeGroupLayer"===k.layerType?U:o}return S(r,p,d,yield function w(r){return A.apply(this,arguments)}(y.url))}return N(d)>0?S(r,p,d):function z(r,u){return M.apply(this,arguments)}(r,p)}),E.apply(this,arguments)}function M(){return(M=(0,s.Z)(function*(r,u){const{portalItem:a}=r;if(!a?.url)return;const y=yield(0,B.T)(a.url);y&&S(r,u,{layers:y.layers?.map(F),tables:y.tables?.map(F)})})).apply(this,arguments)}function F(r){return{id:r.id,name:r.name}}function S(r,u,a,y){let i=a.layers||[];const f=a.tables||[];if("Feature Collection"===r.portalItem?.type&&(i.forEach(n=>{"Table"===n?.layerDefinition?.type&&f.push(n)}),i=i.filter(n=>"Table"!==n?.layerDefinition?.type)),"coverage"in a){const n=function X(r){const{coverage:u}=r;if(!u)return null;const a=new URL(u);if(u.toLowerCase().includes("item.html")){const y=a.searchParams.get("id");return e.Z.fromPortalItem({portalItem:new g.default({id:y,url:a.origin})})}if((0,l.B5)(u))return e.Z.fromArcGISServerUrl({url:u});throw new L.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(a);n&&r.add(n)}i.reverse().forEach(n=>{const o=V(r,u(n),a,n,y?.(n));r.add(o)}),f.reverse().forEach(n=>{const o=V(r,u(n),a,n,y?.(n));r.tables.add(o)})}function V(r,u,a,y,i){const f=r.portalItem,n=new u({portalItem:f.clone(),layerId:y.id});if("sourceJSON"in n&&(n.sourceJSON=i),"subtype-group"!==n.type&&(n.sublayerTitleMode="service-name"),"Feature Collection"===f.type){const o={origin:"portal-item",portal:f.portal||c.Z.getDefault()};n.read(y,o);const d=a.showLegend;null!=d&&n.read({showLegend:d},o)}return n}function Z(r,u){return R.apply(this,arguments)}function R(){return(R=(0,s.Z)(function*(r,u){if(!1===r.supportsData)return;const a=r.instance,y=a.portalItem;if(!y)return;let i=null;try{i=yield y.fetchData("json",u)}catch{}if(function Q(r){return"stream"!==r.type&&"oriented-imagery"!==r.type&&"layerId"in r}(a)){let f=null,n=!0;if(i&&N(i)>0){if(null==a.layerId){const o=K(i);a.layerId="subtype-group"===a.type?o?.[0]:$(i)}f=function Y(r,u){const{layerId:a}=u,y=r.layers?.find(i=>i.id===a)||r.tables?.find(i=>i.id===a);return y&&function b(r,u){return!("feature"===u.type&&"layerType"in r&&"SubtypeGroupLayer"===r.layerType||"subtype-group"===u.type&&!("layerType"in r))}(y,u)?y:null}(i,a),f&&(1===N(i)&&(n=!1),null!=i.showLegend&&(f.showLegend=i.showLegend))}return n&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),f}return i})).apply(this,arguments)}function C(r,u){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(function*(r,u){if(null==r?.layers||null==r?.tables){const a=yield(0,B.T)(u);(r=r||{}).layers=r.layers||a?.layers,r.tables=r.tables||a?.tables}return r})).apply(this,arguments)}function $(r){const u=r.layers;if(u&&u.length)return u[0].id;const a=r.tables;return a&&a.length?a[0].id:null}function N(r){return(r?.layers?.length??0)+(r?.tables?.length??0)}function K(r){const u=[];return r?.layers?.forEach(a=>{"SubtypeGroupLayer"===a.layerType&&u.push(a.id)}),u}function A(){return(A=(0,s.Z)(function*(r){const{layersJSON:u}=yield(0,m.V)(r);if(!u)return null;const a=[...u.layers,...u.tables];return y=>a.find(i=>i.id===y.id)})).apply(this,arguments)}},7534:(W,h,t)=>{t.r(h),t.d(h,{fromItem:()=>P,selectLayerClassPath:()=>D});var s=t(15861),L=t(26584),e=t(72469),l=t(30164),m=t(55463),c=t(83705),g=t(37281),v=t(45205);function P(n){return I.apply(this,arguments)}function I(){return I=(0,s.Z)(function*(n){!n.portalItem||n.portalItem instanceof m.default||(n={...n,portalItem:new m.default(n.portalItem)});const o=yield function B(n){return G.apply(this,arguments)}(n.portalItem);return new o.constructor({portalItem:n.portalItem,...o.properties})}),I.apply(this,arguments)}function G(){return G=(0,s.Z)(function*(n){return yield n.load(),function J(n){return T.apply(this,arguments)}(yield D(n))}),G.apply(this,arguments)}function D(n){return j.apply(this,arguments)}function j(){return j=(0,s.Z)(function*(n){switch(n.type){case"Map Service":return function H(n){return E.apply(this,arguments)}(n);case"Feature Service":return function z(n){return M.apply(this,arguments)}(n);case"Feature Collection":return function V(n){return Z.apply(this,arguments)}(n);case"Scene Service":return function F(n){return S.apply(this,arguments)}(n);case"Image Service":return function R(n){return C.apply(this,arguments)}(n);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:throw new L.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type})}}),j.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*(n){const o=l.T[n.className];return{constructor:yield o(),properties:n.properties}})).apply(this,arguments)}function E(){return E=(0,s.Z)(function*(n){return(yield function u(n){return a.apply(this,arguments)}(n))?{className:"TileLayer"}:{className:"MapImageLayer"}}),E.apply(this,arguments)}function M(){return M=(0,s.Z)(function*(n){if((0,g._$)(n,"Oriented Imagery Layer"))return function A(n){return r.apply(this,arguments)}(n);const o=yield y(n);if("object"==typeof o){const d={};return null!=o.id&&(d.layerId=o.id),{className:o.className||"FeatureLayer",properties:d}}return{className:"GroupLayer"}}),M.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*(n){const o=yield y(n);if("object"==typeof o){const d={};let p;if(null!=o.id?(d.layerId=o.id,p=`${n.url}/layers/${o.id}`):p=n.url,n.typeKeywords?.length)for(const U of Object.keys(e.fb))if(n.typeKeywords.includes(U))return{className:e.fb[U]};const O=yield(0,v.T)(p);return{className:e.fb[O?.layerType]||"SceneLayer",properties:d}}return!1===o&&"Voxel"===(yield(0,v.T)(n.url))?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function Z(){return(Z=(0,s.Z)(function*(n){yield n.load();const o=(0,g._$)(n,"Map Notes"),d=(0,g._$)(n,"Markup");if(o||d)return{className:"MapNotesLayer"};if((0,g._$)(n,"Route Layer"))return{className:"RouteLayer"};const p=yield n.fetchData();return 1===(0,c.getNumLayersAndTables)(p)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function C(){return(C=(0,s.Z)(function*(n){yield n.load();const o=n.typeKeywords?.map(k=>k.toLowerCase())??[];if(o.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(o.includes("tiled imagery"))return{className:"ImageryTileLayer"};const d=(yield n.fetchData())?.layerType;if("ArcGISTiledImageServiceLayer"===d)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===d)return{className:"ImageryLayer"};const p=yield(0,v.T)(n.url),O=p.cacheType?.toLowerCase(),U=p.capabilities?.toLowerCase().includes("tilesonly");return"map"===O||U?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function r(){return(r=(0,s.Z)(function*(n){yield n.load();const o=yield n.fetchData();return o.coverage?{className:"GroupLayer"}:{className:"OrientedImageryLayer",properties:o}})).apply(this,arguments)}function a(){return(a=(0,s.Z)(function*(n){return(yield(0,v.T)(n.url)).tileInfo})).apply(this,arguments)}function y(n){return i.apply(this,arguments)}function i(){return(i=(0,s.Z)(function*(n){const o=n.url;if(!o||o.match(/\/\d+$/))return{};yield n.load();const d=yield n.fetchData();if("Feature Service"===n.type){const p=f(yield(0,c.preprocessFSItemData)(d,o));if("object"==typeof p){const O=(0,c.getSubtypeGroupLayerIds)(d);p.className=null!=p.id&&O.includes(p.id)?"SubtypeGroupLayer":"FeatureLayer"}return p}return(0,c.getNumLayersAndTables)(d)>0?f(d):f(yield(0,v.T)(o))})).apply(this,arguments)}function f(n){return 1===(0,c.getNumLayersAndTables)(n)&&{id:(0,c.getFirstLayerOrTableId)(n)}}},45205:(W,h,t)=>{t.d(h,{T:()=>e});var s=t(15861),L=t(84792);function e(m,c){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)(function*(m,c){const{data:g}=yield(0,L.default)(m,{responseType:"json",query:{f:"json",...c?.customParameters,token:c?.apiKey}});return g})).apply(this,arguments)}}}]);