"use strict";(self.webpackChunkarcgis=self.webpackChunkarcgis||[]).push([[8592],{85840:(Q,V,r)=>{r.d(V,{Z:()=>R});var y=r(17626),D=r(14517),T=r(79608),O=r(61996),F=r(86810),U=r(62208),A=r(77712),Z=(r(90912),r(85931),r(76898));let N=0,W=class extends((0,F.eC)((0,T.J)((0,O.IG)(D.Z)))){constructor(S){super(S),this.id=`${Date.now().toString(16)}-analysis-${N++}`,this.title=null}get parent(){return this._get("parent")}set parent(S){const j=this.parent;if((0,U.pC)(j))switch(j.type){case"line-of-sight":case"dimension":j.releaseAnalysis(this);break;case"2d":case"3d":j.analyses.includes(this)&&j.analyses.remove(this)}this._set("parent",S)}get isEditable(){return this.requiredPropertiesForEditing.every(U.pC)}};(0,y._)([(0,A.Cb)({type:String,constructOnly:!0,clonable:!1})],W.prototype,"id",void 0),(0,y._)([(0,A.Cb)({type:String})],W.prototype,"title",void 0),(0,y._)([(0,A.Cb)({constructOnly:!0})],W.prototype,"type",void 0),(0,y._)([(0,A.Cb)({clonable:!1,value:null})],W.prototype,"parent",null),(0,y._)([(0,A.Cb)({readOnly:!0})],W.prototype,"isEditable",null),(0,y._)([(0,A.Cb)({readOnly:!0})],W.prototype,"requiredPropertiesForEditing",void 0),W=(0,y._)([(0,Z.j)("esri.analysis.Analysis")],W);const R=W},57577:(Q,V,r)=>{function y(D){throw new Error('Could not dynamically require "'+D+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}r.d(V,{c:()=>y})},7006:(Q,V,r)=>{r.d(V,{A:()=>E,B:()=>h,C:()=>B,D:()=>s,E:()=>m,F:()=>C,G:()=>b,H:()=>w,I:()=>z,J:()=>H,K:()=>$,L:()=>k,M:()=>ee,N:()=>q,a:()=>F,b:()=>U,c:()=>O,d:()=>A,e:()=>T,f:()=>G,g:()=>re,h:()=>L,i:()=>Z,j:()=>R,k:()=>v,l:()=>l,m:()=>p,n:()=>_,o:()=>S,p:()=>I,q:()=>x,r:()=>j,s:()=>M,t:()=>N,u:()=>g,v:()=>P,w:()=>W,x:()=>K,y:()=>d,z:()=>a});var y=r(4918),D=r(15994);function T(Y){return y.G.extendedSpatialReferenceInfo(Y)}function O(Y,X,J){return y.G.clip(D.N,Y,X,J)}function F(Y,X,J){return y.G.cut(D.N,Y,X,J)}function U(Y,X,J){return y.G.contains(D.N,Y,X,J)}function A(Y,X,J){return y.G.crosses(D.N,Y,X,J)}function G(Y,X,J,te){return y.G.distance(D.N,Y,X,J,te)}function L(Y,X,J){return y.G.equals(D.N,Y,X,J)}function Z(Y,X,J){return y.G.intersects(D.N,Y,X,J)}function N(Y,X,J){return y.G.touches(D.N,Y,X,J)}function W(Y,X,J){return y.G.within(D.N,Y,X,J)}function R(Y,X,J){return y.G.disjoint(D.N,Y,X,J)}function S(Y,X,J){return y.G.overlaps(D.N,Y,X,J)}function j(Y,X,J,te){return y.G.relate(D.N,Y,X,J,te)}function v(Y,X){return y.G.isSimple(D.N,Y,X)}function M(Y,X){return y.G.simplify(D.N,Y,X)}function l(Y,X,J=!1){return y.G.convexHull(D.N,Y,X,J)}function p(Y,X,J){return y.G.difference(D.N,Y,X,J)}function _(Y,X,J){return y.G.symmetricDifference(D.N,Y,X,J)}function I(Y,X,J){return y.G.intersect(D.N,Y,X,J)}function g(Y,X,J=null){return y.G.union(D.N,Y,X,J)}function x(Y,X,J,te,ne,se,oe){return y.G.offset(D.N,Y,X,J,te,ne,se,oe)}function P(Y,X,J,te,ne=!1){return y.G.buffer(D.N,Y,X,J,te,ne)}function K(Y,X,J,te,ne,se,oe){return y.G.geodesicBuffer(D.N,Y,X,J,te,ne,se,oe)}function d(Y,X,J,te=!0){return y.G.nearestCoordinate(D.N,Y,X,J,te)}function a(Y,X,J){return y.G.nearestVertex(D.N,Y,X,J)}function E(Y,X,J,te,ne){return y.G.nearestVertices(D.N,Y,X,J,te,ne)}function h(Y,X,J,te){if(null==X||null==te)throw new Error("Illegal Argument Exception");const ne=y.G.rotate(X,J,te);return ne.spatialReference=Y,ne}function B(Y,X,J){if(null==X||null==J)throw new Error("Illegal Argument Exception");const te=y.G.flipHorizontal(X,J);return te.spatialReference=Y,te}function s(Y,X,J){if(null==X||null==J)throw new Error("Illegal Argument Exception");const te=y.G.flipVertical(X,J);return te.spatialReference=Y,te}function m(Y,X,J,te,ne){return y.G.generalize(D.N,Y,X,J,te,ne)}function C(Y,X,J,te){return y.G.densify(D.N,Y,X,J,te)}function b(Y,X,J,te,ne=0){return y.G.geodesicDensify(D.N,Y,X,J,te,ne)}function w(Y,X,J){return y.G.planarArea(D.N,Y,X,J)}function z(Y,X,J){return y.G.planarLength(D.N,Y,X,J)}function H(Y,X,J,te){return y.G.geodesicArea(D.N,Y,X,J,te)}function $(Y,X,J,te){return y.G.geodesicLength(D.N,Y,X,J,te)}function k(Y,X,J){return null==X||null==J?[]:y.G.intersectLinesToPoints(D.N,Y,X,J)}function ee(Y,X){y.G.changeDefaultSpatialReferenceTolerance(Y,X)}function q(Y){y.G.clearDefaultSpatialReferenceTolerance(Y)}const re=Object.freeze(Object.defineProperty({__proto__:null,buffer:P,changeDefaultSpatialReferenceTolerance:ee,clearDefaultSpatialReferenceTolerance:q,clip:O,contains:U,convexHull:l,crosses:A,cut:F,densify:C,difference:p,disjoint:R,distance:G,equals:L,extendedSpatialReferenceInfo:T,flipHorizontal:B,flipVertical:s,generalize:m,geodesicArea:H,geodesicBuffer:K,geodesicDensify:b,geodesicLength:$,intersect:I,intersectLinesToPoints:k,intersects:Z,isSimple:v,nearestCoordinate:d,nearestVertex:a,nearestVertices:E,offset:x,overlaps:S,planarArea:w,planarLength:z,relate:j,rotate:h,simplify:M,symmetricDifference:_,touches:N,union:g,within:W},Symbol.toStringTag,{value:"Module"}))},128:(Q,V,r)=>{r.d(V,{B:()=>Z});var y=r(15861),D=r(22558),T=r(21726),O=r(35948),F=r(34117),U=r(31283),A=r(77712),G=r(61556),L=r(29840);function Z(g){const x=g?.origins??[void 0];return(P,K)=>{const d=function N(g,x,P){if("resource"===g?.type)return function W(g,x,P){const K=(0,F.Oe)(x,P);return{type:String,read:(d,a,E)=>{const h=(0,L.r)(d,a,E);return K.type===String?h:"function"==typeof K.type?new K.type({url:h}):void 0},write:{writer(d,a,E,h){if(!h||!h.resources)return"string"==typeof d?void(a[E]=(0,L.t)(d,h)):void(a[E]=d.write({},h));const B=function _(g){return null==g?null:"string"==typeof g?g:g.url}(d),s=(0,L.t)(B,{...h,verifyItemRelativeUrls:h&&h.verifyItemRelativeUrls?{writtenUrls:h.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},L.M.NO),m=K.type!==String&&(!(0,D.l)(this)||h&&h.origin&&this.originIdOf(P)>(0,U.M9)(h.origin)),C={object:this,propertyName:P,value:d,targetUrl:s,dest:a,targetPropertyName:E,context:h,params:g};h&&h.portalItem&&s&&!(0,T.YP)(s)?m?function S(g){const{context:x,targetUrl:P,params:K,value:d,dest:a,targetPropertyName:E}=g;if(!x.portalItem)return;const h=x.portalItem.resourceFromPath(P),B=M(d,P,x),s=(0,G.B)(B),m=(0,T.Ml)(h.path),C=K?.compress??!1;s===m?(x.resources&&v({...g,resource:h,content:B,compress:C,updates:x.resources.toUpdate}),a[E]=P):R(g)}(C):function j({context:g,targetUrl:x,dest:P,targetPropertyName:K}){g.portalItem&&g.resources&&(g.resources.toKeep.push({resource:g.portalItem.resourceFromPath(x),compress:!1}),P[K]=x)}(C):h&&h.portalItem&&(null==s||null!=(0,L.i)(s)||(0,T.jc)(s)||m)?R(C):a[E]=s}}}}(g,x,P);switch(g?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:K,write:d}=L.a;return{read:K,write:d}}}}(g,P,K);for(const a of x){const E=(0,A.CJ)(P,a,K);for(const h in d)E[h]=d[h]}}}function R(g){const{targetUrl:x,params:P,value:K,context:d,dest:a,targetPropertyName:E}=g;if(!d.portalItem)return;const h=(0,L.p)(x),B=h?.filename??(0,O.D)(),s=P?.prefix??h?.prefix,m=M(K,x,d),C=(0,T.v_)(s,B),b=`${C}.${(0,G.B)(m)}`,w=d.portalItem.resourceFromPath(b);(0,T.jc)(x)&&d.resources&&d.resources.pendingOperations.push(function l(g){return p.apply(this,arguments)}(x).then(H=>{w.path=`${C}.${(0,G.B)(H)}`,a[E]=w.itemRelativeUrl}).catch(()=>{}));const z=P?.compress??!1;d.resources&&v({...g,resource:w,content:m,compress:z,updates:d.resources.toAdd}),a[E]=w.itemRelativeUrl}function v({object:g,propertyName:x,updates:P,resource:K,content:d,compress:a}){P.push({resource:K,content:d,compress:a,finish:E=>{!function I(g,x,P){"string"==typeof g[x]?g[x]=P.url:g[x].url=P.url}(g,x,E)}})}function M(g,x,P){return"string"==typeof g?{url:x}:new Blob([JSON.stringify(g.toJSON(P))],{type:"application/json"})}function p(){return(p=(0,y.Z)(function*(g){const x=(yield Promise.resolve().then(r.bind(r,84792))).default,{data:P}=yield x(g,{responseType:"blob"});return P})).apply(this,arguments)}},90740:(Q,V,r)=>{r.d(V,{J:()=>O,r:()=>T});let y=null,D=!0;function T(A,G,L){if(!A||!G)throw new Error("Cannot construct image data without dimensions");if(D)try{return new ImageData(A,G)}catch{D=!1}return U(A,G,L)}function O(A,G,L,Z){if(!G||!L)throw new Error("Cannot construct image data without dimensions");if(D)try{return new ImageData(A,G,L)}catch{D=!1}const N=U(G,L,Z);return N.data.set(A,0),N}function U(A,G,L){return L||(L=function F(){return y||(y=document.createElement("canvas"),y.width=1,y.height=1),y}()),L.getContext("2d").createImageData(A,G)}},36592:(Q,V,r)=>{r.d(V,{Q:()=>F});var y=r(85931),D=r(62208),T=r(77029),O=r(14259);class F{constructor(a=9,E){this._compareMinX=L,this._compareMinY=Z,this._toBBox=h=>h,this._maxEntries=Math.max(4,a||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),E&&("function"==typeof E?this._toBBox=E:this._initFormat(E)),this.clear()}destroy(){this.clear(),l.prune(),p.prune(),_.prune(),I.prune()}all(a){this._all(this._data,a)}search(a,E){let h=this._data;const B=this._toBBox;if(v(a,h))for(l.clear();h;){for(let s=0,m=h.children.length;s<m;s++){const C=h.children[s],b=h.leaf?B(C):C;v(a,b)&&(h.leaf?E(C):j(a,b)?this._all(C,E):l.push(C))}h=l.pop()}}collides(a){let E=this._data;const h=this._toBBox;if(!v(a,E))return!1;for(l.clear();E;){for(let B=0,s=E.children.length;B<s;B++){const m=E.children[B],C=E.leaf?h(m):m;if(v(a,C)){if(E.leaf||j(a,C))return!0;l.push(m)}}E=l.pop()}return!1}load(a){if(!a.length)return this;if(a.length<this._minEntries){for(let h=0,B=a.length;h<B;h++)this.insert(a[h]);return this}let E=this._build(a.slice(0,a.length),0,a.length-1,0);if(this._data.children.length)if(this._data.height===E.height)this._splitRoot(this._data,E);else{if(this._data.height<E.height){const h=this._data;this._data=E,E=h}this._insert(E,this._data.height-E.height-1,!0)}else this._data=E;return this}insert(a){return a&&this._insert(a,this._data.height-1),this}clear(){return this._data=new P([]),this}remove(a){if(!a)return this;let E,h=this._data,B=null,s=0,m=!1;const C=this._toBBox(a);for(_.clear(),I.clear();h||_.length>0;){if(h||(h=(0,D.j0)(_.pop()),B=_.data[_.length-1],s=I.pop()??0,m=!0),h.leaf&&(E=(0,y.cq)(h.children,a,h.children.length,h.indexHint),-1!==E))return h.children.splice(E,1),_.push(h),this._condense(_),this;m||h.leaf||!j(h,C)?B?(s++,h=B.children[s],m=!1):h=null:(_.push(h),I.push(s),s=0,B=h,h=h.children[0])}return this}toJSON(){return this._data}fromJSON(a){return this._data=a,this}_all(a,E){let h=a;for(p.clear();h;){if(!0===h.leaf)for(const B of h.children)E(B);else p.pushArray(h.children);h=p.pop()??null}}_build(a,E,h,B){const s=h-E+1;let m=this._maxEntries;if(s<=m){const z=new P(a.slice(E,h+1));return U(z,this._toBBox),z}B||(B=Math.ceil(Math.log(s)/Math.log(m)),m=Math.ceil(s/m**(B-1)));const C=new K([]);C.height=B;const b=Math.ceil(s/m),w=b*Math.ceil(Math.sqrt(m));M(a,E,h,w,this._compareMinX);for(let z=E;z<=h;z+=w){const H=Math.min(z+w-1,h);M(a,z,H,b,this._compareMinY);for(let $=z;$<=H;$+=b){const k=Math.min($+b-1,H);C.children.push(this._build(a,$,k,B-1))}}return U(C,this._toBBox),C}_chooseSubtree(a,E,h,B){for(;B.push(E),!0!==E.leaf&&B.length-1!==h;){let s,m=1/0,C=1/0;for(let b=0,w=E.children.length;b<w;b++){const z=E.children[b],H=N(z),$=R(a,z)-H;$<C?(C=$,m=H<m?H:m,s=z):$===C&&H<m&&(m=H,s=z)}E=s||E.children[0]}return E}_insert(a,E,h){const s=h?a:(0,this._toBBox)(a);_.clear();const m=this._chooseSubtree(s,this._data,E,_);for(m.children.push(a),G(m,s);E>=0&&_.data[E].children.length>this._maxEntries;)this._split(_,E),E--;this._adjustParentBBoxes(s,_,E)}_split(a,E){const h=a.data[E],B=h.children.length,s=this._minEntries;this._chooseSplitAxis(h,s,B);const m=this._chooseSplitIndex(h,s,B);if(!m)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const C=h.children.splice(m,h.children.length-m),b=h.leaf?new P(C):new K(C);b.height=h.height,U(h,this._toBBox),U(b,this._toBBox),E?a.data[E-1].children.push(b):this._splitRoot(h,b)}_splitRoot(a,E){this._data=new K([a,E]),this._data.height=a.height+1,U(this._data,this._toBBox)}_chooseSplitIndex(a,E,h){let B,s,m;B=s=1/0;for(let C=E;C<=h-E;C++){const b=A(a,0,C,this._toBBox),w=A(a,C,h,this._toBBox),z=S(b,w),H=N(b)+N(w);z<B?(B=z,m=C,s=H<s?H:s):z===B&&H<s&&(s=H,m=C)}return m}_chooseSplitAxis(a,E,h){const B=a.leaf?this._compareMinX:L,s=a.leaf?this._compareMinY:Z;this._allDistMargin(a,E,h,B)<this._allDistMargin(a,E,h,s)&&a.children.sort(B)}_allDistMargin(a,E,h,B){a.children.sort(B);const s=this._toBBox,m=A(a,0,E,s),C=A(a,h-E,h,s);let b=W(m)+W(C);for(let w=E;w<h-E;w++){const z=a.children[w];G(m,a.leaf?s(z):z),b+=W(m)}for(let w=h-E-1;w>=E;w--){const z=a.children[w];G(C,a.leaf?s(z):z),b+=W(C)}return b}_adjustParentBBoxes(a,E,h){for(let B=h;B>=0;B--)G(E.data[B],a)}_condense(a){for(let E=a.length-1;E>=0;E--){const h=a.data[E];if(0===h.children.length)if(E>0){const B=a.data[E-1],s=B.children;s.splice((0,y.cq)(s,h,s.length,B.indexHint),1)}else this.clear();else U(h,this._toBBox)}}_initFormat(a){const E=["return a"," - b",";"];this._compareMinX=new Function("a","b",E.join(a[0])),this._compareMinY=new Function("a","b",E.join(a[1])),this._toBBox=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}function U(d,a){A(d,0,d.children.length,a,d)}function A(d,a,E,h,B){B||(B=new P([])),B.minX=1/0,B.minY=1/0,B.maxX=-1/0,B.maxY=-1/0;for(let s,m=a;m<E;m++)s=d.children[m],G(B,d.leaf?h(s):s);return B}function G(d,a){d.minX=Math.min(d.minX,a.minX),d.minY=Math.min(d.minY,a.minY),d.maxX=Math.max(d.maxX,a.maxX),d.maxY=Math.max(d.maxY,a.maxY)}function L(d,a){return d.minX-a.minX}function Z(d,a){return d.minY-a.minY}function N(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function W(d){return d.maxX-d.minX+(d.maxY-d.minY)}function R(d,a){return(Math.max(a.maxX,d.maxX)-Math.min(a.minX,d.minX))*(Math.max(a.maxY,d.maxY)-Math.min(a.minY,d.minY))}function S(d,a){const E=Math.max(d.minX,a.minX),h=Math.max(d.minY,a.minY),B=Math.min(d.maxX,a.maxX),s=Math.min(d.maxY,a.maxY);return Math.max(0,B-E)*Math.max(0,s-h)}function j(d,a){return d.minX<=a.minX&&d.minY<=a.minY&&a.maxX<=d.maxX&&a.maxY<=d.maxY}function v(d,a){return a.minX<=d.maxX&&a.minY<=d.maxY&&a.maxX>=d.minX&&a.maxY>=d.minY}function M(d,a,E,h,B){const s=[a,E];for(;s.length;){const m=(0,D.j0)(s.pop()),C=(0,D.j0)(s.pop());if(m-C<=h)continue;const b=C+Math.ceil((m-C)/h/2)*h;(0,O.q)(d,b,C,m,B),s.push(C,b,b,m)}}const l=new T.Z,p=new T.Z,_=new T.Z,I=new T.Z({deallocator:void 0});class g{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class x extends g{constructor(){super(...arguments),this.height=1,this.indexHint=new y.SO}}class P extends x{constructor(a){super(),this.children=a,this.leaf=!0}}class K extends x{constructor(a){super(),this.children=a,this.leaf=!1}}},75327:(Q,V,r)=>{r.d(V,{Qc:()=>N,WU:()=>F,lt:()=>Z});var y=r(77275),D=r(56683);const T={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function O(v=(0,D.Kd)()){let M=(v=v.toLowerCase())in T;if(!M){const I=v.split("-");I.length>1&&I[0]in T&&(v=I[0],M=!0),M||(v="en")}const[l,p,_="#,##0.###"]=T[v];return{decimal:l,group:p,pattern:_}}function F(v,M){const l=O((M={...M}).locale);M.customs=l;const p=M.pattern||l.pattern;return isNaN(v)||Math.abs(v)===1/0?null:function A(v,M,l){const p=(l=l||{}).customs.group,_=l.customs.decimal,I=M.split(";"),g=I[0];if((M=I[v<0?1:0]||"-"+g).includes("%"))v*=100;else if(M.includes("\u2030"))v*=1e3;else{if(M.includes("\xa4"))throw new Error("currency notation not supported");if(M.includes("E"))throw new Error("exponential notation not supported")}const x=U,P=g.match(x);if(!P)throw new Error("unable to find a number expression in pattern: "+M);return!1===l.fractional&&(l.places=0),M.replace(x,function G(v,M,l){!0===(l=l||{}).places&&(l.places=0),l.places===1/0&&(l.places=6);const p=M.split("."),_="string"==typeof l.places&&l.places.indexOf(",");let I=l.places;_?I=l.places.substring(_+1):I>=0||(I=(p[1]||[]).length),l.round<0||(v=Number(v.toFixed(Number(I))));const g=String(Math.abs(v)).split("."),x=g[1]||"";if(p[1]||l.places){_&&(l.places=l.places.substring(0,_));const B=void 0!==l.places?l.places:p[1]&&p[1].lastIndexOf("0")+1;B>x.length&&(g[1]=x.padEnd(Number(B),"0")),I<x.length&&(g[1]=x.substr(0,Number(I)))}else g[1]&&g.pop();const P=p[0].replace(",","");let K=P.indexOf("0");-1!==K&&(K=P.length-K,K>g[0].length&&(g[0]=g[0].padStart(K,"0")),P.includes("#")||(g[0]=g[0].substr(g[0].length-K)));let d,a,E=p[0].lastIndexOf(",");if(-1!==E){d=p[0].length-E-1;const B=p[0].substr(0,E);E=B.lastIndexOf(","),-1!==E&&(a=B.length-E-1)}const h=[];for(let B=g[0];B;){const s=B.length-d;h.push(s>0?B.substr(s):B),B=s>0?B.slice(0,s):"",a&&(d=a,a=void 0)}return g[0]=h.reverse().join(l.group||","),g.join(l.decimal||".")}(v,P[0],{decimal:_,group:p,places:l.places,round:l.round}))}(v,p,M)}const U=/[#0,]*[#0](?:\.0*#*)?/;function Z(v){const M=O((v=v||{}).locale),l=v.pattern||M.pattern,p=M.group,_=M.decimal;let I=1;if(l.includes("%"))I/=100;else if(l.includes("\u2030"))I/=1e3;else if(l.includes("\xa4"))throw new Error("currency notation not supported");const g=l.split(";");return 1===g.length&&g.push("-"+g[0]),{regexp:S(g,P=>(P="(?:"+(0,y.Qs)(P,".")+")").replace(U,K=>{const d={signed:!1,separator:v.strict?p:[p,""],fractional:v.fractional,decimal:_,exponent:!1},a=K.split(".");let E=v.places;1===a.length&&1!==I&&(a[1]="###"),1===a.length||0===E?d.fractional=!1:(void 0===E&&(E=v.pattern?a[1].lastIndexOf("0")+1:1/0),E&&null==v.fractional&&(d.fractional=!0),!v.places&&E<a[1].length&&(E+=","+a[1].length),d.places=E);const h=a[0].split(",");return h.length>1&&(d.groupSize=h.pop().length,h.length>1&&(d.groupSize2=h.pop().length)),"("+function W(v){"places"in(v=v||{})||(v.places=1/0),"string"!=typeof v.decimal&&(v.decimal="."),"fractional"in v&&!/^0/.test(String(v.places))||(v.fractional=[!0,!1]),"exponent"in v||(v.exponent=[!0,!1]),"eSigned"in v||(v.eSigned=[!0,!1]);const M=R(v),l=S(v.fractional,_=>{let I="";return _&&0!==v.places&&(I="\\"+v.decimal,v.places===1/0?I="(?:"+I+"\\d+)?":I+="\\d{"+v.places+"}"),I},!0);let p=M+l;return l&&(p="(?:(?:"+p+")|(?:"+l+"))"),p+S(v.exponent,_=>_?"([eE]"+R({signed:v.eSigned})+")":"")}(d)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:p,decimal:_,factor:I}}function N(v,M){const l=Z(M),p=new RegExp("^"+l.regexp+"$").exec(v);if(!p)return NaN;let _=p[1];if(!p[1]){if(!p[2])return NaN;_=p[2],l.factor*=-1}return _=_.replace(new RegExp("["+l.group+"\\s\\xa0]","g"),"").replace(l.decimal,"."),Number(_)*l.factor}function R(v){return"signed"in(v=v||{})||(v.signed=[!0,!1]),"separator"in v?"groupSize"in v||(v.groupSize=3):v.separator="",S(v.signed,M=>M?"[-+]":"",!0)+S(v.separator,M=>{if(!M)return"(?:\\d+)";" "===(M=(0,y.Qs)(M))?M="\\s":"\xa0"===M&&(M="\\s\\xa0");const l=v.groupSize,p=v.groupSize2;if(p){const _="(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+M+"]\\d{"+p+"})*["+M+"]\\d{"+l+"})";return l-p>0?"(?:"+_+"|(?:0|[1-9]\\d{0,"+(l-1)+"}))":_}return"(?:0|[1-9]\\d{0,"+(l-1)+"}(?:["+M+"]\\d{"+l+"})*)"},!0)}const S=(v,M,l)=>{if(!(v instanceof Array))return M(v);const p=[];for(let _=0;_<v.length;_++)p.push(M(v[_]));return j(p.join("|"),Boolean(l))},j=(v,M)=>"("+(M?"?:":"")+v+")"},88070:(Q,V,r)=>{r.d(V,{E:()=>N,H:()=>Z});var y=r(30217),D=r(550),T=r(67831),O=r(84161);const U=(0,r(28093).c)(),A=(0,D.c)(),G=(0,D.c)(),L=(0,D.c)();function Z(R,S,j){return(0,O.s)(U,S[0],S[1],1),(0,O.t)(U,U,(0,y.t)(A,j)),0===U[2]?(0,T.s)(R,U[0],U[1]):(0,T.s)(R,U[0]/U[2],U[1]/U[2])}function N(R,S,j){return W(G,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7]),W(L,j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7]),(0,y.m)(R,(0,y.a)(G,G),L),0!==R[8]&&(R[0]/=R[8],R[1]/=R[8],R[2]/=R[8],R[3]/=R[8],R[4]/=R[8],R[5]/=R[8],R[6]/=R[8],R[7]/=R[8],R[8]/=R[8]),R}function W(R,S,j,v,M,l,p,_,I){(0,y.s)(R,S,v,l,j,M,p,1,1,1),(0,O.s)(U,_,I,1),(0,y.a)(A,R);const[g,x,P]=(0,O.t)(U,U,(0,y.t)(A,A));return(0,y.s)(A,g,0,0,0,x,0,0,0,P),(0,y.m)(R,A,R)}},77777:(Q,V,r)=>{r.r(V),r.d(V,{hydratedAdapter:()=>U});var y=r(2004),D=r(72854),T=r(72642),O=r(37118),F=r(55214);const U={convertToGEGeometry:function A(R,S){if(null==S)return null;let j="cache"in S?S.cache._geVersion:void 0;return null==j&&(j=R.convertJSONToGeometry(S),"cache"in S&&(S.cache._geVersion=j)),j},exportPoint:function G(R,S,j){const v=R.hasZ(S),M=R.hasM(S),l=new T.Z({x:R.getPointX(S),y:R.getPointY(S),spatialReference:j});return v&&(l.z=R.getPointZ(S)),M&&(l.m=R.getPointM(S)),l.cache._geVersion=S,l},exportPolygon:function L(R,S,j){const v=new O.Z({rings:R.exportPaths(S),hasZ:R.hasZ(S),hasM:R.hasM(S),spatialReference:j});return v.cache._geVersion=S,v},exportPolyline:function Z(R,S,j){const v=new F.Z({paths:R.exportPaths(S),hasZ:R.hasZ(S),hasM:R.hasM(S),spatialReference:j});return v.cache._geVersion=S,v},exportMultipoint:function N(R,S,j){const v=new D.Z({hasZ:R.hasZ(S),hasM:R.hasM(S),points:R.exportPoints(S),spatialReference:j});return v.cache._geVersion=S,v},exportExtent:function W(R,S,j){const v=R.hasZ(S),M=R.hasM(S),l=new y.Z({xmin:R.getXMin(S),ymin:R.getYMin(S),xmax:R.getXMax(S),ymax:R.getYMax(S),spatialReference:j});if(v){const p=R.getZExtent(S);l.zmin=p.vmin,l.zmax=p.vmax}if(M){const p=R.getMExtent(S);l.mmin=p.vmin,l.mmax=p.vmax}return l.cache._geVersion=S,l}}},32825:(Q,V,r)=>{r.r(V),r.d(V,{buffer:()=>T.v,changeDefaultSpatialReferenceTolerance:()=>T.M,clearDefaultSpatialReferenceTolerance:()=>T.N,clip:()=>T.c,contains:()=>T.b,convexHull:()=>T.l,crosses:()=>T.d,cut:()=>T.a,densify:()=>T.F,difference:()=>T.m,disjoint:()=>T.j,distance:()=>T.f,equals:()=>T.h,extendedSpatialReferenceInfo:()=>T.e,flipHorizontal:()=>T.C,flipVertical:()=>T.D,generalize:()=>T.E,geodesicArea:()=>T.J,geodesicBuffer:()=>T.x,geodesicDensify:()=>T.G,geodesicLength:()=>T.K,intersect:()=>T.p,intersectLinesToPoints:()=>T.L,intersects:()=>T.i,isSimple:()=>T.k,nearestCoordinate:()=>T.y,nearestVertex:()=>T.z,nearestVertices:()=>T.A,offset:()=>T.q,overlaps:()=>T.o,planarArea:()=>T.H,planarLength:()=>T.I,relate:()=>T.r,rotate:()=>T.B,simplify:()=>T.s,symmetricDifference:()=>T.n,touches:()=>T.t,union:()=>T.u,within:()=>T.w}),r(4918),r(15994);var T=r(7006)},10992:(Q,V,r)=>{r.d(V,{Ue:()=>U,nF:()=>R,zk:()=>Z});var y=r(21286),D=r(97535),T=r(84161),O=r(28093),F=r(26242);function U(g){return g?{origin:(0,O.a)(g.origin),vector:(0,O.a)(g.vector)}:{origin:(0,O.c)(),vector:(0,O.c)()}}function Z(g,x,P=U()){return(0,T.c)(P.origin,g),(0,T.b)(P.vector,x,g),P}function R(g,x,P){return function j(g,x,P,K,d){const{vector:a,origin:E}=g,h=(0,T.b)(F.WM.get(),x,E),B=(0,T.e)(a,h)/(0,T.p)(a);return(0,T.g)(d,a,(0,y.uZ)(B,P,K)),(0,T.a)(d,d,g.origin)}(g,x,0,1,P)}(0,O.c)(),(0,O.c)(),new D.x(()=>U())},28678:(Q,V,r)=>{r.r(V),r.d(V,{default:()=>B});var E,y=r(15861),D=r(17626),O=(r(29132),r(84792)),F=r(26584),U=r(99959),A=r(77275),G=r(21726),L=r(77712),W=(r(90912),r(85931),r(68653)),R=r(76898),S=r(99433),j=r(44917),v=r(552),M=r(49286),l=r(6647),p=r(30346),_=r(99555),I=r(12585),g=r(72258),x=r(2584),P=r(91309),K=r(2004),d=r(65234),a=r(72642);let h=E=class extends((0,v.h)((0,p.Q)((0,_.M)((0,M.q)((0,l.I)((0,U.R)(j.Z))))))){constructor(...s){super(...s),this.copyright="",this.fullExtent=new K.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,d.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=d.Z.WebMercator,this.subDomains=null,this.tileInfo=new x.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new a.Z({x:-20037508.342787,y:20037508.342787,spatialReference:d.Z.WebMercator}),spatialReference:d.Z.WebMercator,lods:[new g.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new g.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new g.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new g.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new g.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new g.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new g.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new g.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new g.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new g.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new g.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new g.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new g.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new g.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new g.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new g.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new g.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new g.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new g.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new g.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new g.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new g.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new g.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new g.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(s,m){return"string"==typeof s?{urlTemplate:s,...m}:s}load(s){const m=this.loadFromPortal({supportedTypes:["WMTS"]},s).then(()=>{let C="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const b=new G.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&b.authority?.includes("{subDomain}")&&(C="is missing 'subDomains' property")}else C="spatialReference must match tileInfo.spatialReference";else C="is missing the required 'urlTemplate' property value";if(C)throw new F.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${C}`)});return this.addResolvingPromise(m),Promise.resolve(this)}get levelValues(){const s=[];if(!this.tileInfo)return null;for(const m of this.tileInfo.lods)s[m.level]=m.levelValue||m.level;return s}readSpatialReference(s,m){return s||m.fullExtent&&m.fullExtent.spatialReference&&d.Z.fromJSON(m.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const s=[],{urlTemplate:m,subDomains:C}=this,b=new G.R9(m),w=b.scheme?b.scheme+"://":"//",z=w+b.authority+"/",H=b.authority;if(H?.includes("{subDomain}")){if(C&&C.length>0&&H.split(".").length>1)for(const $ of C)s.push(w+H.replace(/\{subDomain\}/gi,$)+"/")}else s.push(z);return s.map($=>("/"!==$.charAt($.length-1)&&($+="/"),$))}get urlPath(){if(!this.urlTemplate)return null;const s=this.urlTemplate,m=new G.R9(s);return s.substring(((m.scheme?m.scheme+"://":"//")+m.authority+"/").length)}readUrlTemplate(s,m){return s||m.templateUrl}writeUrlTemplate(s,m){s&&(0,G.oC)(s)&&(s="https:"+s),s&&(s=s.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),s=(0,G.Fv)(s)),m.templateUrl=s}fetchTile(s,m,C,b={}){const{signal:w}=b,z=this.getTileUrl(s,m,C),H={responseType:"image",signal:w,query:{...this.refreshParameters}};return(0,O.default)(z,H).then($=>$.data)}fetchImageBitmapTile(s,m,C,b={}){var w=this;return(0,y.Z)(function*(){const{signal:z}=b;if(w.fetchTile!==E.prototype.fetchTile){const ee=yield w.fetchTile(s,m,C,b);try{return createImageBitmap(ee)}catch(q){throw new F.Z("request:server",`Unable to load tile ${s}/${m}/${C}`,{error:q,level:s,row:m,col:C})}}const H=w.getTileUrl(s,m,C),$={responseType:"blob",signal:z,query:{...w.refreshParameters}},{data:k}=yield(0,O.default)(H,$);return(0,I.g)(k,H)})()}getTileUrl(s,m,C){const{levelValues:b,tileServers:w,urlPath:z}=this;if(!b||!w||!z)return"";const H=b[s];return w[m%w.length]+(0,A.gx)(z,{level:H,z:H,col:C,x:C,row:m,y:m})}};(0,D._)([(0,L.Cb)({type:String,value:"",json:{write:!0}})],h.prototype,"copyright",void 0),(0,D._)([(0,L.Cb)({type:K.Z,json:{write:!0},nonNullable:!0})],h.prototype,"fullExtent",void 0),(0,D._)([(0,L.Cb)({readOnly:!0,json:{read:!1,write:!1}})],h.prototype,"legendEnabled",void 0),(0,D._)([(0,L.Cb)({type:["show","hide"]})],h.prototype,"listMode",void 0),(0,D._)([(0,L.Cb)({json:{read:!0,write:!0}})],h.prototype,"blendMode",void 0),(0,D._)([(0,L.Cb)()],h.prototype,"levelValues",null),(0,D._)([(0,L.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],h.prototype,"isReference",void 0),(0,D._)([(0,L.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],h.prototype,"operationalLayerType",void 0),(0,D._)([(0,L.Cb)({readOnly:!0,json:{read:!1,write:!1}})],h.prototype,"popupEnabled",void 0),(0,D._)([(0,L.Cb)({type:d.Z})],h.prototype,"spatialReference",void 0),(0,D._)([(0,W.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],h.prototype,"readSpatialReference",null),(0,D._)([(0,L.Cb)({type:[String],json:{write:!0}})],h.prototype,"subDomains",void 0),(0,D._)([(0,L.Cb)({type:x.Z,json:{write:!0}})],h.prototype,"tileInfo",void 0),(0,D._)([(0,L.Cb)({readOnly:!0})],h.prototype,"tileServers",null),(0,D._)([(0,L.Cb)({json:{read:!1}})],h.prototype,"type",void 0),(0,D._)([(0,L.Cb)()],h.prototype,"urlPath",null),(0,D._)([(0,L.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],h.prototype,"urlTemplate",void 0),(0,D._)([(0,W.r)("urlTemplate",["urlTemplate","templateUrl"])],h.prototype,"readUrlTemplate",null),(0,D._)([(0,S.c)("urlTemplate",{templateUrl:{type:String}})],h.prototype,"writeUrlTemplate",null),(0,D._)([(0,L.Cb)({type:P.B,json:{write:!0}})],h.prototype,"wmtsInfo",void 0),h=E=(0,D._)([(0,R.j)("esri.layers.WebTileLayer")],h);const B=h},47519:(Q,V,r)=>{var y,D;r.d(V,{i:()=>y}),(D=y||(y={}))[D.PROJECT_VERTICES=1]="PROJECT_VERTICES"},61256:(Q,V,r)=>{r.d(V,{H:()=>G});var y=r(8314),D=r(36592),T=r(65401);const F={minX:0,minY:0,maxX:0,maxY:0};class G{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new D.Q(9,(0,y.Z)("esri-csp-restrictions")?Z=>({minX:Z[0],minY:Z[1],maxX:Z[2],maxY:Z[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const Z=new Array(this._idByBounds.size);let N=0;this._idByBounds.forEach((W,R)=>{Z[N++]=R}),this._indexInvalid=!1,this._index.clear(),this._index.load(Z)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(Z=>this._idByBounds.has(Z))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const Z=(0,T.cS)();for(const N of this._boundsById.values())N&&(Z[0]=Math.min(N[0],Z[0]),Z[1]=Math.min(N[1],Z[1]),Z[2]=Math.max(N[2],Z[2]),Z[3]=Math.max(N[3],Z[3]));return Z}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(Z){const N=this._boundsById.get(Z);this._boundsById.delete(Z),N&&(this._idByBounds.delete(N),this._indexInvalid||this._index.remove(N))}forEachInBounds(Z,N){this._loadIndex(),function A(L,Z,N){(function U(L){F.minX=L[0],F.minY=L[1],F.maxX=L[2],F.maxY=L[3]})(Z),L.search(F,N)}(this._index,Z,W=>N(this._idByBounds.get(W)))}get(Z){return this._boundsById.get(Z)}has(Z){return this._boundsById.has(Z)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(Z,N){if(!this._indexInvalid){const W=this._boundsById.get(Z);W&&(this._index.remove(W),this._idByBounds.delete(W))}this._boundsById.set(Z,N),N&&(this._idByBounds.set(N,Z),this._indexInvalid||(this._boundsToLoad.push(N),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},82708:(Q,V,r)=>{r.d(V,{Z:()=>j});var y=r(26584),D=r(61885),T=r(63290),O=r(62208),F=r(5548),U=r(65401),A=r(82054),G=r(61256),L=r(77044),Z=r(66385),N=r(88071);const W={getObjectId:v=>v.objectId,getAttributes:v=>v.attributes,getAttribute:(v,M)=>v.attributes[M],cloneWithGeometry:(v,M)=>new Z.u_(M,v.attributes,null,v.objectId),getGeometry:v=>v.geometry,getCentroid:(v,M)=>((0,O.Wi)(v.centroid)&&(v.centroid=(0,L.Y)(new N.Z,v.geometry,M.hasZ,M.hasM)),v.centroid)};var R=r(6185);const S=(0,F.Ue)();class j{constructor(M){this.geometryInfo=M,this._boundsStore=new G.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new D.Z,this.featureAdapter=W}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let M=0;return this._featuresById.forEach(l=>{(0,O.pC)(l.geometry)&&l.geometry.coords&&(M+=l.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:M/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(M){if((0,O.Wi)(this.fullBounds))return null;const[l,p,_,I]=this.fullBounds;return{xmin:l,ymin:p,xmax:_,ymax:I,spatialReference:(0,R.S2)(M)}}add(M){this._add(M),this._emitChanged()}addMany(M){for(const l of M)this._add(l);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(M){const l=this._featuresById.get(M);return l?(this._remove(l),this._emitChanged(),l):null}removeManyById(M){this._boundsStore.invalidateIndex();for(const l of M){const p=this._featuresById.get(l);p&&this._remove(p)}this._emitChanged()}forEachBounds(M,l){for(const p of M){const _=this._boundsStore.get(p.objectId);_&&l((0,F.JR)(S,_))}}getFeature(M){return this._featuresById.get(M)}has(M){return this._featuresById.has(M)}forEach(M){this._featuresById.forEach(l=>M(l))}forEachInBounds(M,l){this._boundsStore.forEachInBounds(M,p=>{l(this._featuresById.get(p))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let M=!1;this._featuresById.forEach((l,p)=>{this._markedIds.has(p)||(M=!0,this._remove(l))}),this._markedIds.clear(),M&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(M){if(!M)return;const l=M.objectId;if(null==l)return void T.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new y.Z("featurestore:invalid-feature","feature id is missing",{feature:M}));const p=this._featuresById.get(l);let _;if(this._markedIds.add(l),p?(M.displayId=p.displayId,_=this._boundsStore.get(l),this._boundsStore.delete(l)):(0,O.pC)(this.onFeatureAdd)&&this.onFeatureAdd(M),(0,O.Wi)(M.geometry)||!M.geometry.coords||!M.geometry.coords.length)return this._boundsStore.set(l,null),void this._featuresById.set(l,M);_=(0,A.$)((0,O.pC)(_)?_:(0,U.Ue)(),M.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,O.pC)(_)&&this._boundsStore.set(l,_),this._featuresById.set(l,M)}_remove(M){(0,O.pC)(this.onFeatureRemove)&&this.onFeatureRemove(M);const l=M.objectId;return this._markedIds.delete(l),this._boundsStore.delete(l),this._featuresById.delete(l),M}}},1476:(Q,V,r)=>{r.d(V,{S:()=>D,X:()=>y});const y=1;function D(T,O){let F=0;for(const U of O){const A=U.attributes?.[T];"number"==typeof A&&isFinite(A)&&(F=Math.max(F,A))}return F}},20901:(Q,V,r)=>{r.r(V),r.d(V,{createConnection:()=>B});var y=r(15861),D=r(17626),O=(r(29132),r(84792)),F=r(26584),U=r(63290),A=r(62208),G=r(10699),L=r(21726),R=(r(90912),r(85931),r(8314),r(76898)),S=r(77712),j=r(33696),v=r(61885);let M=class extends v.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new F.Z("stream-connection",this.errorString):null}onFeature(s){this.emit("data-received",s)}onMessage(s){this.emit("message-received",s)}};(0,D._)([(0,S.Cb)({readOnly:!0})],M.prototype,"connectionError",null),M=(0,D._)([(0,R.j)("esri.layers.support.StreamConnection")],M);const l=M;var p,s;(s=p||(p={}))[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED";let _=class extends l{constructor(s){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:m,spatialReference:C,sourceSpatialReference:b}=s;this._config=s,this._featureZScaler=(0,j.k)(m,b,C),this._open()}_open(){var s=this;return(0,y.Z)(function*(){yield s._tryCreateWebSocket(),s.destroyed||(yield s._handshake())})()}destroy(){super.destroy(),(0,A.pC)(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if((0,A.Wi)(this._websocket))return"disconnected";switch(this._websocket.readyState){case p.CONNECTING:case p.OPEN:return"connected";case p.CLOSING:case p.CLOSED:return"disconnected"}}sendMessageToSocket(s){(0,A.Wi)(this._websocket)?this._outstandingMessages.push(s):this._websocket.send(JSON.stringify(s))}sendMessageToClient(s){this._onMessage(s)}updateCustomParameters(s){this._config.customParameters=s,(0,A.pC)(this._websocket)&&this._websocket.close()}_tryCreateWebSocket(s=this._config.source.path,m=1e3,C=0){var b=this;return(0,y.Z)(function*(){try{if(b.destroyed)return;const w=(0,L.fl)(s,b._config.customParameters??{});b._websocket=yield b._createWebSocket(w),b.notifyChange("connectionStatus")}catch(w){const z=m/1e3;return b._config.maxReconnectionAttempts&&C>=b._config.maxReconnectionAttempts?(U.Z.getLogger(b.declaredClass).error(new F.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void b.destroy()):(U.Z.getLogger(b.declaredClass).error(new F.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${z}s`,w)),yield(0,G.e4)(m),b._tryCreateWebSocket(s,Math.min(1.5*m,1e3*b._config.maxReconnectionInterval),C+1))}})()}_setWebSocketJSONParseHandler(s){s.onmessage=m=>{try{const C=JSON.parse(m.data);this._onMessage(C)}catch(C){return void U.Z.getLogger(this.declaredClass).error(new F.Z("websocket-connection","Failed to parse message, invalid JSON",{error:C}))}}}_createWebSocket(s){return new Promise((m,C)=>{const b=new WebSocket(s);b.onopen=()=>{if(b.onopen=null,this.destroyed)return b.onclose=null,void b.close();b.onclose=w=>this._onClose(w),b.onerror=w=>this._onError(w),this._setWebSocketJSONParseHandler(b),m(b)},b.onclose=w=>{b.onopen=b.onclose=null,C(w)}})}_handshake(s=1e4){var m=this;return(0,y.Z)(function*(){const C=m._websocket;if((0,A.Wi)(C))return;const b=(0,G.hh)(),w=C.onmessage,{filter:z,outFields:H,spatialReference:$}=m._config;return b.timeout(s),C.onmessage=k=>{let ee=null;try{ee=JSON.parse(k.data)}catch{}ee&&"object"==typeof ee||(U.Z.getLogger(m.declaredClass).error(new F.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",k.data)),b.reject(),m.destroy()),ee.spatialReference?.wkid!==$?.wkid&&(U.Z.getLogger(m.declaredClass).error(new F.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${$.wkid}`,k.data)),b.reject(),m.destroy()),"json"!==ee.format&&(U.Z.getLogger(m.declaredClass).error(new F.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",k.data)),b.reject(),m.destroy()),z&&ee.filter!==z&&U.Z.getLogger(m.declaredClass).error(new F.Z("websocket-connection","Tried to set filter, but server doesn't support it")),H&&ee.outFields!==H&&U.Z.getLogger(m.declaredClass).error(new F.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),C.onmessage=w;for(const q of m._outstandingMessages)C.send(JSON.stringify(q));m._outstandingMessages=[],b.resolve()},C.send(JSON.stringify({filter:z,outFields:H,format:"json",spatialReference:{wkid:$.wkid}})),b.promise})()}_onMessage(s){if(this.onMessage(s),"type"in s)switch(s.type){case"features":case"featureResult":for(const m of s.features)(0,A.pC)(this._featureZScaler)&&this._featureZScaler(m.geometry),this.onFeature(m)}}_onError(s){const m="Encountered an error over WebSocket connection";this._set("errorString",m),U.Z.getLogger(this.declaredClass).error("websocket-connection",m)}_onClose(s){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==s.code&&U.Z.getLogger(this.declaredClass).error("websocket-connection",`WebSocket closed unexpectedly with error code ${s.code}`),this.destroyed||this._open()}};(0,D._)([(0,S.Cb)()],_.prototype,"connectionStatus",null),(0,D._)([(0,S.Cb)()],_.prototype,"errorString",void 0),_=(0,D._)([(0,R.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],_);var I=r(20477),g=r(96854),x=r(91179),P=r(65234);const d={maxQueryDepth:5,maxRecordCountFactor:3};let a=class extends _{constructor(s){super({...d,...s}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var s=this;return(0,y.Z)(function*(){const m=yield s._fetchServiceDefinition(s._config.source);m.timeInfo.trackIdField||U.Z.getLogger(s.declaredClass).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const C=s._fetchWebSocketUrl(m.streamUrls,s._config.spatialReference);s._buddyServicesQuery||(s._buddyServicesQuery=s._queryBuddyServices()),yield s._buddyServicesQuery,yield s._tryCreateWebSocket(C);const{filter:b,outFields:w}=s._config;s.destroyed||s._setFilter(b,w)})()}_onMessage(s){if("attributes"in s){let m;try{m=this._enrich(s),(0,A.pC)(this._featureZScaler)&&this._featureZScaler(m.geometry)}catch(C){return void U.Z.getLogger(this.declaredClass).error(new F.Z("geoevent-connection","Failed to parse message",C))}this.onFeature(m)}else this.onMessage(s)}_fetchServiceDefinition(s){var m=this;return(0,y.Z)(function*(){const C={f:"json",...m._config.customParameters},b=(0,O.default)(s.path,{query:C,responseType:"json"}),w=(yield b).data;return m._serviceDefinition=w,w})()}_fetchWebSocketUrl(s,m){const C=s[0],{urls:b,token:w}=C,z=this._inferWebSocketBaseUrl(b);return(0,L.fl)(`${z}/subscribe`,{outSR:""+m.wkid,token:w})}_inferWebSocketBaseUrl(s){if(1===s.length)return s[0];for(const m of s)if(m.includes("wss"))return m;return U.Z.getLogger(this.declaredClass).error(new F.Z("geoevent-connection","Unable to infer WebSocket url",s)),null}_setFilter(s,m){var C=this;return(0,y.Z)(function*(){const b=C._websocket;if((0,A.Wi)(b)||(0,A.Wi)(s)&&(0,A.Wi)(m))return;const w=JSON.stringify({filter:C._serializeFilter(s,m)});let z=!1;const H=(0,G.hh)();return b.onmessage=ee=>{const q=JSON.parse(ee.data);q.filter&&(q.error&&(U.Z.getLogger(C.declaredClass).error(new F.Z("geoevent-connection","Failed to set service filter",q.error)),C._set("errorString",`Could not set service filter - ${q.error}`),H.reject(q.error)),C._setWebSocketJSONParseHandler(b),z=!0,H.resolve())},b.send(w),setTimeout(()=>{z||(C.destroyed||C._websocket!==b||U.Z.getLogger(C.declaredClass).error(new F.Z("geoevent-connection","Server timed out when setting filter")),H.reject())},1e4),H.promise})()}_serializeFilter(s,m){const C={};if((0,A.Wi)(s)&&(0,A.Wi)(m))return C;if((0,A.pC)(s)&&s.geometry)try{const b=(0,x.im)(s.geometry);if("extent"!==b.type)throw new F.Z(`Expected extent but found type ${b.type}`);C.geometry=JSON.stringify(b.shiftCentralMeridian())}catch(b){U.Z.getLogger(this.declaredClass).error(new F.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",b))}return(0,A.pC)(s)&&s.where&&"1 = 1"!==s.where&&"1=1"!==s.where&&(C.where=s.where),(0,A.pC)(m)&&(C.outFields=m.join(",")),C}_enrich(s){if(!this._relatedFeatures)return s;const b=this._relatedFeatures.get(s.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!b)return U.Z.getLogger(this.declaredClass).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",s),s;const{attributes:w,geometry:z}=b;for(const H in w)s.attributes[H]=w[H];return z&&(s.geometry=z),s.geometry||s.centroid||U.Z.getLogger(this.declaredClass).error(new F.Z("geoevent-connection","Found malformed feature - no geometry found",s)),s}_queryBuddyServices(){var s=this;return(0,y.Z)(function*(){try{const{relatedFeatures:m,keepLatestArchive:C}=s._serviceDefinition,b=s._queryRelatedFeatures(m),w=s._queryArchive(C);yield b;const z=yield w;if(!z)return;for(const H of z.features)s.onFeature(s._enrich(H))}catch(m){U.Z.getLogger(s.declaredClass).error(new F.Z("geoevent-connection","Encountered an error when querying buddy services",{error:m}))}})()}_queryRelatedFeatures(s){var m=this;return(0,y.Z)(function*(){if(!s)return;const C=yield m._queryBuddy(s.featuresUrl);m._addRelatedFeatures(C)})()}_queryArchive(s){var m=this;return(0,y.Z)(function*(){if(s)return m._queryBuddy(s.featuresUrl)})()}_queryBuddy(s){var m=this;return(0,y.Z)(function*(){const C=new((yield Promise.resolve().then(r.bind(r,80415))).default)({url:s}),{capabilities:b}=yield C.load(),w=b.query.supportsMaxRecordCountFactor,z=b.query.supportsPagination,H=b.query.supportsCentroid,$=m._config.maxRecordCountFactor,k=C.capabilities.query.maxRecordCount,ee=w?k*$:k,q=new g.Z;if(q.outFields=(0,A.Pt)(m._config.outFields,["*"]),q.where=(0,A.Pt)((0,A.U2)(m._config.filter,"where"),"1=1"),q.returnGeometry=!0,q.returnExceededLimitFeatures=!0,q.outSpatialReference=P.Z.fromJSON(m._config.spatialReference),H&&(q.returnCentroid=!0),w&&(q.maxRecordCountFactor=$),z)return q.num=ee,C.destroy(),m._queryPages(s,q);const re=yield(0,I.JT)(s,q,m._config.sourceSpatialReference);return C.destroy(),re.data})()}_queryPages(s,m,C=[],b=0){var w=this;return(0,y.Z)(function*(){m.start=(0,A.pC)(m.num)?b*m.num:null;const{data:z}=yield(0,I.JT)(s,m,w._config.sourceSpatialReference);return z.exceededTransferLimit&&b<(w._config.maxQueryDepth??0)?(z.features.forEach(H=>C.push(H)),w._queryPages(s,m,C,b+1)):(C.forEach(H=>z.features.push(H)),z)})()}_addRelatedFeatures(s){const m=new Map,C=s.features,b=this._serviceDefinition.relatedFeatures.joinField;for(const w of C)m.set(w.attributes[b],w);this._relatedFeatures=m}};a=(0,D._)([(0,R.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],a);const E=a;let h=class extends l{constructor(s){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:m,spatialReference:C,sourceSpatialReference:b}=s;this._featureZScaler=(0,j.k)(m,b,C)}updateCustomParameters(s){}sendMessageToSocket(s){}sendMessageToClient(s){if("type"in s)switch(s.type){case"features":case"featureResult":for(const m of s.features)(0,A.pC)(this._featureZScaler)&&this._featureZScaler(m.geometry),this.onFeature(m)}this.onMessage(s)}};function B(s,m,C,b,w,z,H,$){const k={source:s,sourceSpatialReference:m,spatialReference:C,geometryType:b,filter:w,maxReconnectionAttempts:z,maxReconnectionInterval:H,customParameters:$};return s?s.path.startsWith("wss://")||s.path.startsWith("ws://")?new _(k):new E(k):new h(k)}(0,D._)([(0,S.Cb)()],h.prototype,"connectionStatus",void 0),(0,D._)([(0,S.Cb)()],h.prototype,"errorString",void 0),h=(0,D._)([(0,R.j)("esri.layers.support.ClientSideConnection")],h)},35775:(Q,V,r)=>{r.d(V,{O0:()=>N,av:()=>A,b:()=>M,d1:()=>L,og:()=>S});var y=r(15861),D=r(62208),T=r(37053),O=r(36630);class F{constructor(){this.code=null,this.description=null}}class U{constructor(_){this.error=new F,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=_}}function A(p){return new U(p)}class G{constructor(_){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=_}}function L(p){return new G(p)}const Z=new Set;function N(p,_,I,g=!1,x){Z.clear();for(const P in I){const K=p.get(P);if(!K)continue;const d=I[P],a=W(K,d);if(a!==d&&x&&x.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:K,originalValue:d,sanitizedValue:a}}),Z.add(K.name),K&&(g||K.editable)){const E=(0,O.Qc)(K,a);if(E)return A((0,O.vP)(E,K,a));_[K.name]=a}}for(const P of p?.requiredFields??[])if(!Z.has(P.name))return A(`missing required field "${P.name}"`);return null}function W(p,_){let I=_;return"string"==typeof _&&(0,O.H7)(p)?I=parseFloat(_):null!=_&&(0,O.qN)(p)&&"string"!=typeof _&&(I=String(_)),(0,O.Pz)(I)}let R;function S(p,_){if(!p||!(0,T.JY)(_))return p;if("rings"in p||"paths"in p){if((0,D.Wi)(R))throw new TypeError("geometry engine not loaded");return R.simplify(_,p)}return p}function v(){return(v=(0,y.Z)(function*(){return(0,D.Wi)(R)&&(R=yield Promise.all([r.e(4918),r.e(8592)]).then(r.bind(r,32825))),R})).apply(this,arguments)}function M(p,_){return l.apply(this,arguments)}function l(){return l=(0,y.Z)(function*(p,_){!(0,T.JY)(p)||"esriGeometryPolygon"!==_&&"esriGeometryPolyline"!==_||(yield function j(){return v.apply(this,arguments)}())}),l.apply(this,arguments)}},5143:(Q,V,r)=>{r.d(V,{Z:()=>N});var y=r(17626),T=(r(29132),r(77712)),U=(r(90912),r(85931),r(68653)),A=r(76898),G=r(51026),L=r(28930),Z=r(65234);const N=W=>{let R=class extends W{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(S,j){return null!=j.minLOD&&null!=j.maxLOD?S:0}readMaxScale(S,j){return null!=j.minLOD&&null!=j.maxLOD?S:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(S,j){return j.capabilities&&j.capabilities.includes("Tilemap")?new L.y({layer:this}):null}};return(0,y._)([(0,T.Cb)({json:{read:{source:"copyrightText"}}})],R.prototype,"copyright",void 0),(0,y._)([(0,T.Cb)()],R.prototype,"minScale",void 0),(0,y._)([(0,U.r)("service","minScale")],R.prototype,"readMinScale",null),(0,y._)([(0,T.Cb)()],R.prototype,"maxScale",void 0),(0,y._)([(0,U.r)("service","maxScale")],R.prototype,"readMaxScale",null),(0,y._)([(0,T.Cb)({type:Z.Z})],R.prototype,"spatialReference",void 0),(0,y._)([(0,T.Cb)({readOnly:!0})],R.prototype,"supportsBlankTile",null),(0,y._)([(0,T.Cb)(G.h)],R.prototype,"tileInfo",void 0),(0,y._)([(0,T.Cb)()],R.prototype,"tilemapCache",void 0),(0,y._)([(0,U.r)("service","tilemapCache",["capabilities"])],R.prototype,"readTilemapCache",null),(0,y._)([(0,T.Cb)()],R.prototype,"version",void 0),R=(0,y._)([(0,A.j)("esri.layers.mixins.ArcGISCachedService")],R),R}},22825:(Q,V,r)=>{r.d(V,{A:()=>D});const y=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function D(T){return null!=T&&y.some(([O,F])=>T>=O&&T<=F)}},51920:(Q,V,r)=>{r.d(V,{j:()=>L});var y=r(17626),D=r(14517),T=r(80542),O=r(77712),A=(r(90912),r(85931),r(76898));const G={visible:"visibleSublayers"};let L=class extends((0,T.p)(D.Z)){constructor(Z){super(Z),this.scale=0}set layer(Z){this._get("layer")!==Z&&(this._set("layer",Z),this.handles.remove("layer"),Z&&this.handles.add([Z.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),Z.on("wms-sublayer-update",N=>this.notifyChange(G[N.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:Z})=>Z).map(({name:Z})=>Z).join()}get version(){this.commitProperty("layers");const Z=this.layer;return Z&&Z.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:Z,scale:N}=this,W=Z?.sublayers,R=[],S=j=>{const{minScale:v,maxScale:M,sublayers:l,visible:p}=j;p&&(0===N||(0===v||N<=v)&&(0===M||N>=M))&&(l?l.forEach(S):R.push(j))};return W?.forEach(S),R}toJSON(){const{layer:Z,layers:N}=this,{imageFormat:W,imageTransparency:R,version:S}=Z;return{format:W,request:"GetMap",service:"WMS",styles:"",transparent:R?"TRUE":"FALSE",version:S,layers:N}}};(0,y._)([(0,O.Cb)()],L.prototype,"layer",null),(0,y._)([(0,O.Cb)({readOnly:!0})],L.prototype,"layers",null),(0,y._)([(0,O.Cb)({type:Number})],L.prototype,"scale",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],L.prototype,"version",null),(0,y._)([(0,O.Cb)({readOnly:!0})],L.prototype,"visibleSublayers",null),L=(0,y._)([(0,A.j)("esri.layers.support.ExportWMSImageParameters")],L)},17732:(Q,V,r)=>{r.d(V,{L:()=>W});var y=r(17626),D=r(14517),T=r(62208),O=r(77712),A=(r(90912),r(85931),r(76898)),G=r(37118),L=r(54614),Z=r(65401),N=r(65629);let W=class extends D.Z{constructor(R){super(R)}get bounds(){const R=this.coords;return(0,T.Wi)(R)||(0,T.Wi)(R.extent)?null:(0,Z.oJ)(R.extent)}get coords(){const R=(0,T.Wg)(this.element.georeference)?.coords;return(0,L.dz)(R,this.spatialReference).geometry}get normalizedCoords(){return G.Z.fromJSON((0,N.Ui)(this.coords))}get normalizedBounds(){const R=(0,T.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,T.pC)(R)?(0,Z.oJ)(R):null}};(0,y._)([(0,O.Cb)()],W.prototype,"spatialReference",void 0),(0,y._)([(0,O.Cb)()],W.prototype,"element",void 0),(0,y._)([(0,O.Cb)()],W.prototype,"bounds",null),(0,y._)([(0,O.Cb)()],W.prototype,"coords",null),(0,y._)([(0,O.Cb)()],W.prototype,"normalizedCoords",null),(0,y._)([(0,O.Cb)()],W.prototype,"normalizedBounds",null),W=(0,y._)([(0,A.j)("esri.layers.support.MediaElementView")],W)},28930:(Q,V,r)=>{r.d(V,{y:()=>K});var P,y=r(15861),D=r(17626),T=r(84792),O=r(14517),F=r(27306),U=r(26584),A=r(80542),G=r(63290),L=r(93961),Z=r(77029),N=r(10699),W=r(32917),R=r(50618),S=r(21726),j=r(77712),v=r(66656),M=r(85931),l=r(76898),p=r(68511),_=r(58817);class I{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(a,E){if("unknown"!==this._allAvailability)return this._allAvailability;const h=(a-this.location.top)*this.location.width+(E-this.location.left),s=h>>3,m=this._tileAvailabilityBitSet;return s<0||s>m.length?"unknown":m[s]&1<<h%8?"available":"unavailable"}_updateFromData(a){let B=!0,s=!0;const m=Math.ceil(this.location.width*this.location.height/8),C=new Uint8Array(m);let b=0;for(let w=0;w<a.length;w++){const z=w%8;a[w]?(s=!1,C[b]|=1<<z):B=!1,7===z&&++b}s?this._allAvailability="unavailable":B?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=C,this.byteSize+=C.length)}static fromDefinition(a,E){const h=a.service.request||T.default,{row:B,col:s,width:m,height:C}=a,b={query:{f:"json"}};return E=E?{...b,...E}:b,h(function x(d){let a;if("vector-tile"===d.service.type)a=`${d.service.url}/tilemap/${d.level}/${d.row}/${d.col}/${d.width}/${d.height}`;else{const h=d.service.tileServers;a=`${h&&h.length?h[d.row%h.length]:d.service.url}/tilemap/${d.level}/${d.row}/${d.col}/${d.width}/${d.height}`}const E=d.service.query;return E&&(a=`${a}?${E}`),a}(a),E).then(w=>w.data).catch(w=>{if(w&&w.details&&422===w.details.httpStatus)return{location:{top:B,left:s,width:m,height:C},valid:!0,data:(0,M.a9)(m*C,0)};throw w}).then(w=>{if(w.location&&(w.location.top!==B||w.location.left!==s||w.location.width!==m||w.location.height!==C))throw new U.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:w,definition:{top:B,left:s,width:m,height:C}});return I.fromJSON(w)})}static fromJSON(a){I._validateJSON(a);const E=new I;return E.location=Object.freeze((0,_.d9)(a.location)),E._updateFromData(a.data),Object.freeze(E)}static _validateJSON(a){if(!a||!a.location)throw new U.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===a.valid)throw new U.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!a.data)throw new U.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(a.data))throw new U.Z("tilemap:data-mismatch","Data must be an array of numbers");if(a.data.length!==a.location.width*a.location.height)throw new U.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function g(d){return`${d.level}/${d.row}/${d.col}/${d.width}/${d.height}`}let K=P=class extends((0,A.p)(O.Z)){constructor(d){super(d),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*F.Y8.MEGABYTES,this.request=T.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new L.Z(this.cacheByteSize),this.addHandles([(0,W.YP)(()=>{const{layer:d}=this;return[d?.parsedUrl,d?.tileServers,d?.apiKey,d?.customParameters]},()=>this._initializeTilemapDefinition()),(0,W.YP)(()=>this.layer?.tileInfo?.lods,d=>this._initializeAvailableLevels(d),W.tX)]),this._initializeTilemapDefinition()}castLevels(d){return d<=2?(G.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",d),3):d}get size(){return 1<<this.levels}fetchTilemap(d,a,E,h){if(!this._availableLevels[d])return Promise.reject(new U.Z("tilemap-cache:level-unavailable",`Level ${d} is unavailable in the service`));const B=this._tmpTilemapDefinition,s=this._tilemapFromCache(d,a,E,B);if(s)return Promise.resolve(s);const m=h&&h.signal;return h={...h,signal:null},new Promise((C,b)=>{(0,N.fu)(m,()=>b((0,N.zE)()));const w=g(B);let z=this._pendingTilemapRequests[w];if(!z){z=I.fromDefinition(B,h).then($=>(this._tilemapCache.put(w,$,$.byteSize),$));const H=()=>delete this._pendingTilemapRequests[w];this._pendingTilemapRequests[w]=z,z.then(H,H)}z.then(C,b)})}getAvailability(d,a,E){if(!this._availableLevels[d])return"unavailable";const h=this._tilemapFromCache(d,a,E,this._tmpTilemapDefinition);return h?h.getAvailability(a,E):"unknown"}fetchAvailability(d,a,E,h){return this._availableLevels[d]?this.fetchTilemap(d,a,E,h).catch(B=>B).then(B=>{if(B instanceof I){const s=B.getAvailability(a,E);if("unavailable"===s)throw new U.Z("tile-map:tile-unavailable","Tile is not available",{level:d,row:a,col:E});return s}if((0,N.D_)(B))throw B;return"unknown"}):Promise.reject(new U.Z("tilemap-cache:level-unavailable",`Level ${d} is unavailable in the service`))}fetchAvailabilityUpsample(d,a,E,h,B){h.level=d,h.row=a,h.col=E;const s=this.layer.tileInfo;s.updateTileInfo(h);const m=this.fetchAvailability(d,a,E,B).catch(C=>{if((0,N.D_)(C))throw C;if(s.upsampleTile(h))return this.fetchAvailabilityUpsample(h.level,h.row,h.col,h);throw C});return this._fetchAvailabilityUpsamplePrefetch(h.id,d,a,E,B,m),m}_fetchAvailabilityUpsamplePrefetch(d,a,E,h,B,s){var m=this;return(0,y.Z)(function*(){if(!m._prefetchingEnabled||null==d)return;const C=`prefetch-${d}`;if(m.handles.has(C))return;const b=new AbortController;s.then(()=>b.abort(),()=>b.abort());let w=!1;if(m.handles.add({remove(){w||(w=!0,b.abort())}},C),yield(0,R.MU)(10,b.signal).catch(()=>{}),w||(w=!0,m.handles.remove(C)),(0,N.Hc)(b))return;const H=new p.f(d,a,E,h),$={...B,signal:b.signal},k=m.layer.tileInfo;for(let ee=0;P._prefetches.length<P._maxPrefetch&&k.upsampleTile(H);++ee){const q=m.fetchAvailability(H.level,H.row,H.col,$);P._prefetches.push(q);const re=()=>{P._prefetches.removeUnordered(q)};q.then(re,re)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:d,apiKey:a,customParameters:E}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:d.path,query:(0,S.B7)({...d.query,...E,token:a??d.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(d,a,E,h){h.level=d,h.row=a-a%this.size,h.col=E-E%this.size;const B=g(h);return this._tilemapCache.get(B)}_initializeAvailableLevels(d){this._availableLevels={},d&&d.forEach(a=>this._availableLevels[a.level]=!0)}get test(){const d=this;return{get prefetchingEnabled(){return d._prefetchingEnabled},set prefetchingEnabled(a){d._prefetchingEnabled=a},hasTilemap:(a,E,h)=>!!d._tilemapFromCache(a,E,h,d._tmpTilemapDefinition)}}};K._maxPrefetch=4,K._prefetches=new Z.Z({initialSize:P._maxPrefetch}),(0,D._)([(0,j.Cb)({constructOnly:!0,type:Number})],K.prototype,"levels",void 0),(0,D._)([(0,v.p)("levels")],K.prototype,"castLevels",null),(0,D._)([(0,j.Cb)({readOnly:!0,type:Number})],K.prototype,"size",null),(0,D._)([(0,j.Cb)({constructOnly:!0,type:Number})],K.prototype,"cacheByteSize",void 0),(0,D._)([(0,j.Cb)({constructOnly:!0})],K.prototype,"layer",void 0),(0,D._)([(0,j.Cb)({constructOnly:!0})],K.prototype,"request",void 0),K=P=(0,D._)([(0,l.j)("esri.layers.support.TilemapCache")],K)},91309:(Q,V,r)=>{r.d(V,{B:()=>G});var A,y=r(17626),D=r(86810),T=r(58817),O=r(77712),U=(r(90912),r(76898));let G=A=class extends D.wq{constructor(L){super(L)}clone(){return new A({customLayerParameters:(0,T.d9)(this.customLayerParameters),customParameters:(0,T.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,y._)([(0,O.Cb)({json:{type:Object,write:!0}})],G.prototype,"customLayerParameters",void 0),(0,y._)([(0,O.Cb)({json:{type:Object,write:!0}})],G.prototype,"customParameters",void 0),(0,y._)([(0,O.Cb)({type:String,json:{write:!0}})],G.prototype,"layerIdentifier",void 0),(0,y._)([(0,O.Cb)({type:String,json:{write:!0}})],G.prototype,"tileMatrixSet",void 0),(0,y._)([(0,O.Cb)({type:String,json:{write:!0}})],G.prototype,"url",void 0),G=A=(0,y._)([(0,U.j)("esri.layer.support.WMTSLayerInfo")],G)},98686:(Q,V,r)=>{r.d(V,{CS:()=>j,Cw:()=>S,Yu:()=>_,j5:()=>v,lm:()=>g});var y=r(15861),D=r(59318),T=r(24263),O=r(73281),F=r(84792),U=r(58817),A=r(21726),G=r(65234),L=r(5548),Z=r(32442),N=r(33474),W=r(17253);const R={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function S(x){const P=x.folders||[],K=P.slice(),d=new Map,a=new Map,E=new Map,h=new Map,B=new Map,s={esriGeometryPoint:a,esriGeometryPolyline:E,esriGeometryPolygon:h};(x.featureCollection&&x.featureCollection.layers||[]).forEach(C=>{const b=(0,U.d9)(C);b.featureSet.features=[];const w=C.featureSet.geometryType;d.set(w,b);const z=C.layerDefinition.objectIdField;"esriGeometryPoint"===w?M(a,z,C.featureSet.features):"esriGeometryPolyline"===w?M(E,z,C.featureSet.features):"esriGeometryPolygon"===w&&M(h,z,C.featureSet.features)}),x.groundOverlays&&x.groundOverlays.forEach(C=>{B.set(C.id,C)}),P.forEach(C=>{C.networkLinkIds.forEach(b=>{const w=function p(x,P,K){const d=function l(x,P){let K;return P.some(d=>d.id===x&&(K=d,!0)),K}(x,K);return d&&(d.parentFolderId=P,d.networkLink=d),d}(b,C.id,x.networkLinks);w&&K.push(w)})}),K.forEach(C=>{if(C.featureInfos){C.points=(0,U.d9)(d.get("esriGeometryPoint")),C.polylines=(0,U.d9)(d.get("esriGeometryPolyline")),C.polygons=(0,U.d9)(d.get("esriGeometryPolygon")),C.mapImages=[];for(const b of C.featureInfos)switch(b.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const w=s[b.type].get(b.id);w&&C[R[b.type]].featureSet.features.push(w);break}case"GroundOverlay":{const w=B.get(b.id);w&&C.mapImages.push(w);break}}C.fullExtent=g([C])}});const m=g(K);return{folders:P,sublayers:K,extent:m}}function j(x,P,K,d){const a=T.id&&T.id.findCredential(x);return x=(0,A.fl)(x,{token:a&&a.token}),(0,F.default)(D.Z.kmlServiceUrl,{query:{url:x,model:"simple",folders:"",refresh:0!==K||void 0,outSR:JSON.stringify(P)},responseType:"json",signal:d})}function v(x,P,K=null,d=[]){const a=[],E={},h=P.sublayers,B=P.folders.map(s=>s.id);return h.forEach(s=>{const m=new x;if(K?m.read(s,K):m.read(s),d.length&&B.includes(m.id)&&(m.visible=d.includes(m.id)),E[s.id]=m,null!=s.parentFolderId&&-1!==s.parentFolderId){const C=E[s.parentFolderId];C.sublayers||(C.sublayers=[]),C.sublayers?.unshift(m)}else a.unshift(m)}),a}function M(x,P,K){K.forEach(d=>{x.set(d.attributes[P],d)})}function _(x){return I.apply(this,arguments)}function I(){return(I=(0,y.Z)(function*(x){const P=W.Z.fromJSON(x.featureSet).features,d=(0,N.i)(x.layerDefinition.drawingInfo.renderer),a=O.Z.fromJSON(x.popupInfo),E=[];for(const h of P){const B=yield d.getSymbolAsync(h);h.symbol=B,h.popupTemplate=a,h.visible=!0,E.push(h)}return E})).apply(this,arguments)}function g(x){const P=(0,L.Ue)(L.Gv),K=(0,L.Ue)(L.Gv);for(const d of x){if(d.polygons&&d.polygons.featureSet&&d.polygons.featureSet.features)for(const a of d.polygons.featureSet.features)(0,Z.Yg)(P,a.geometry),(0,L.TC)(K,P);if(d.polylines&&d.polylines.featureSet&&d.polylines.featureSet.features)for(const a of d.polylines.featureSet.features)(0,Z.Yg)(P,a.geometry),(0,L.TC)(K,P);if(d.points&&d.points.featureSet&&d.points.featureSet.features)for(const a of d.points.featureSet.features)(0,Z.Yg)(P,a.geometry),(0,L.TC)(K,P);if(d.mapImages)for(const a of d.mapImages)(0,Z.Yg)(P,a.extent),(0,L.TC)(K,P)}return(0,L.fS)(K,L.Gv)?void 0:{xmin:K[0],ymin:K[1],zmin:K[2],xmax:K[3],ymax:K[4],zmax:K[5],spatialReference:G.Z.WGS84}}},61068:(Q,V,r)=>{r.d(V,{OE:()=>W,Gc:()=>j,Qg:()=>R,Rq:()=>G,gX:()=>S,z2:()=>L,ET:()=>Z,Vx:()=>M}),r(29132);var D=r(62208),O=r(28594),F=r(72642);const U=new Map,A=new class T{constructor(p=15e3,_=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=p,this._interval=Math.min(p,_)}decreaseRefCount(p,_){const I=p+"/"+_,g=this._cachedBlocks;if(g.has(I)){const x=g.get(I);return x.refCount--,x.refCount<=0&&(g.delete(I),x.controller&&x.controller.abort()),x.refCount}return 0}getBlock(p,_){const I=p+"/"+_,g=this._cachedBlocks;if(g.has(I)){const x=g.get(I);return x.ts=Date.now(),x.refCount++,g.delete(I),g.set(I,x),x.block}return null}putBlock(p,_,I,g){const x=this._cachedBlocks,P=p+"/"+_;if(x.has(P)){const K=x.get(P);K.ts=Date.now(),K.refCount++}else x.set(P,{block:I,ts:Date.now(),refCount:1,controller:g});this._trim(),this._updateTimer()}deleteBlock(p,_){const I=this._cachedBlocks,g=p+"/"+_;I.has(g)&&I.delete(g)}updateMaxSize(p){this._size=p,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const p=this._cachedBlocks;this._timer=setInterval(()=>{const _=Array.from(p),I=Date.now();for(let g=0;g<_.length&&_[g][1].ts<=I-this._duration;g++)p.delete(_[g][0]);0===p.size&&this._clearTimer()},this._interval)}_trim(){const p=this._cachedBlocks;if(-1===this._size||this._size>=p.size)return;const _=Array.from(p);for(let I=0;I<_.length-this._size;I++)p.delete(_[I][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function G(l,p){return null==p?l:`${l}?sliceId=${p}`}function L(l,p){const _={extent:null,rasterInfo:p,cache:new Map},I=U.get(l);return I?(I.push(_),I.length-1):(U.set(l,[_]),0)}function Z(l,p){const _=U.get(l);_&&(_[p]=null,_.some(I=>null!=I)||U.delete(l))}function W(l,p,_){const I=U.get(l);if(!I)return null==p?A.decreaseRefCount(l,_):0;if(null==p||null==I[p])return A.decreaseRefCount(l,_);const g=I[p]?.cache,x=g?.get(_);if(g&&x){if(x.refCount--,0===x.refCount){g.delete(_);for(let P=0;P<I.length;P++)I[P]?.cache.delete(_);x.controller&&x.controller.abort()}return x.refCount}return 0}function R(l,p,_){const I=U.get(l);if(!I)return null==p?A.getBlock(l,_):null;if(null==p||null==I[p]){for(let x=0;x<I.length;x++){const P=I[x]?.cache.get(_);if(P)return P.refCount++,P.block}return A.getBlock(l,_)}const g=I[p]?.cache.get(_);if(g)return g.refCount++,g.block;for(let x=0;x<I.length;x++){if(x===p||!I[x])continue;const P=I[x]?.cache,K=P?.get(_);if(P&&K)return K.refCount++,P.set(_,K),K.block}return null}function S(l,p,_,I,g=null){const x=U.get(l);if(!x)return void(null==p&&A.putBlock(l,_,I,g));if(null==p||null==x[p])return void A.putBlock(l,_,I,g);const P={refCount:1,block:I,isResolved:!1,isRejected:!1,controller:g};I.then(()=>P.isResolved=!0).catch(()=>P.isRejected=!0),x[p]?.cache.set(_,P)}function j(l,p,_){const I=U.get(l);I?null!=p&&null!=I[p]?I[p]?.cache.delete(_):A.deleteBlock(l,_):null==p&&A.deleteBlock(l,_)}function M(l,p,_,I,g,x,P=null){const K=function v(l,p){const _=U.get(l);return _?_[p]??null:null}(l,p);if(!K)return;const d=K.extent,{cache:a,rasterInfo:E}=K;if(d&&d.xmin===_.xmin&&d.xmax===_.xmax&&d.ymin===_.ymin&&d.ymax===_.ymax)return;I=I??0;const h=_.clone().normalize(),{spatialReference:B,transform:s}=E,m=new Set;for(let C=0;C<h.length;C++){const b=h[C];if(b.xmax-b.xmin<=I||b.ymax-b.ymin<=I)continue;let w=(0,O.tB)(b,B,P);(0,D.pC)(s)&&(w=s.inverseTransform(w));const z=new F.Z({x:I,y:I,spatialReference:b.spatialReference});if(null==g&&!(g=(0,O.VO)(z,B,b,P)))return;const{pyramidLevel:H,pyramidResolution:$,excessiveReading:k}=(0,O.kr)(g,E,x||"closest");if(k)return;const{storageInfo:ee}=E,{origin:q}=ee,re={x:Math.max(0,Math.floor((w.xmin-q.x)/$.x)),y:Math.max(0,Math.floor((q.y-w.ymax)/$.y))},Y=Math.ceil((w.xmax-w.xmin)/$.x-.1),X=Math.ceil((w.ymax-w.ymin)/$.y-.1),J=H>0?ee.pyramidBlockWidth:ee.blockWidth,te=H>0?ee.pyramidBlockHeight:ee.blockHeight,ne=1,se=Math.max(0,Math.floor(re.x/J)-ne),oe=Math.max(0,Math.floor(re.y/te)-ne),le=Math.floor((re.x+Y-1)/J)+ne,ce=Math.floor((re.y+X-1)/te)+ne;for(let ie=oe;ie<=ce;ie++)for(let ae=se;ae<=le;ae++)m.add(`${H}/${ie}/${ae}`)}a.forEach((C,b)=>{if(!m.has(b)){const w=a.get(b);(null==w||w.isResolved||w.isRejected)&&a.delete(b)}}),K.extent={xmin:_.xmin,ymin:_.ymin,xmax:_.xmax,ymax:_.ymax}}},51026:(Q,V,r)=>{r.d(V,{d:()=>T,h:()=>D});var y=r(2584);const D={type:y.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:T}}}}};function T(O,F,U,A){if(!O)return null;const{minScale:G,maxScale:L,minLOD:Z,maxLOD:N}=F;if(null!=Z&&null!=N)return y.Z.fromJSON(A&&A.ignoreMinMaxLOD?O:{...O,lods:O.lods.filter(({level:W})=>null!=W&&W>=Z&&W<=N)});if(0!==G&&0!==L){const W=j=>Math.round(1e4*j)/1e4,R=G?W(G):1/0,S=L?W(L):-1/0;return y.Z.fromJSON({...O,lods:O.lods.filter(j=>{const v=W(j.scale);return v<=R&&v>=S})})}return y.Z.fromJSON(O)}},61556:(Q,V,r)=>{r.d(V,{B:()=>D});var y=r(21726);function D(L){return F[function T(L){return L instanceof Blob?L.type:function O(L){const Z=(0,y.Ml)(L);return G[Z]||U}(L.url)}(L)]||A}const F={},U="text/plain",A=F[U],G={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const L in G)F[G[L]]=L},53776:(Q,V,r)=>{r.d(V,{Z:()=>v});var N,y=r(17626),D=r(58817),T=r(77712),O=r(90912),F=r(55342),U=r(76898),A=r(80573),G=r(10914),L=r(91558),Z=r(86810);let W=N=class extends Z.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new N({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,D.d9)(this.color)})}};(0,y._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"description",void 0),(0,y._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"label",void 0),(0,y._)([(0,T.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],W.prototype,"minValue",void 0),(0,y._)([(0,T.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],W.prototype,"maxValue",void 0),(0,y._)([(0,T.Cb)({type:L.Z,json:{type:[O.z8],write:!0}})],W.prototype,"color",void 0),W=N=(0,y._)([(0,U.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],W);const R=W;var S;let j=S=class extends A.Z{constructor(M){super(M),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new S({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,D.d9)(this.colorClassBreakInfos),legendOptions:(0,D.d9)(this.legendOptions)})}};(0,y._)([(0,F.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],j.prototype,"type",void 0),(0,y._)([(0,T.Cb)({json:{write:!0},type:String})],j.prototype,"field",void 0),(0,y._)([(0,T.Cb)({type:G.I,json:{write:!0}})],j.prototype,"legendOptions",void 0),(0,y._)([(0,T.Cb)({type:A.Z.fieldTransformTypeKebabDict.apiValues,json:{type:A.Z.fieldTransformTypeKebabDict.jsonValues,read:A.Z.fieldTransformTypeKebabDict.read,write:A.Z.fieldTransformTypeKebabDict.write}})],j.prototype,"fieldTransformType",void 0),(0,y._)([(0,T.Cb)({type:[R],json:{write:!0}})],j.prototype,"colorClassBreakInfos",void 0),j=S=(0,y._)([(0,U.j)("esri.renderers.PointCloudClassBreaksRenderer")],j);const v=j},80573:(Q,V,r)=>{r.d(V,{Z:()=>K});var L,y=r(17626),D=r(2076),T=r(86810),O=r(58817),F=r(77712),A=(r(90912),r(76898));r(85931);let Z=L=class extends T.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new L({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,y._)([(0,F.Cb)({type:String,json:{write:!0}})],Z.prototype,"field",void 0),(0,y._)([(0,F.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],Z.prototype,"minValue",void 0),(0,y._)([(0,F.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],Z.prototype,"maxValue",void 0),Z=L=(0,y._)([(0,A.j)("esri.renderers.support.pointCloud.ColorModulation")],Z);const N=Z,W=new D.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let R=class extends T.wq{};(0,y._)([(0,F.Cb)({type:W.apiValues,readOnly:!0,nonNullable:!0,json:{type:W.jsonValues,read:!1,write:W.write}})],R.prototype,"type",void 0),R=(0,y._)([(0,A.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],R);const S=R;var v,j=r(55342);let M=v=class extends S{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new v({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,y._)([(0,j.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],M.prototype,"type",void 0),(0,y._)([(0,F.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],M.prototype,"size",void 0),(0,y._)([(0,F.Cb)({type:Boolean,json:{write:!0}})],M.prototype,"useRealWorldSymbolSizes",void 0),M=v=(0,y._)([(0,A.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],M);const l=M;var p;let _=p=class extends S{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new p({scaleFactor:this.scaleFactor})}};(0,y._)([(0,j.J)({pointCloudSplatAlgorithm:"splat"})],_.prototype,"type",void 0),(0,y._)([(0,F.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],_.prototype,"scaleFactor",void 0),_=p=(0,y._)([(0,A.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],_);const g={key:"type",base:S,typeMap:{"fixed-size":l,splat:_}},x=(0,D.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let P=class extends T.wq{constructor(d){super(d),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,O.d9)(this.pointSizeAlgorithm),colorModulation:(0,O.d9)(this.colorModulation),pointsPerInch:(0,O.d9)(this.pointsPerInch)}}};(0,y._)([(0,F.Cb)({type:x.apiValues,readOnly:!0,nonNullable:!0,json:{type:x.jsonValues,read:!1,write:x.write}})],P.prototype,"type",void 0),(0,y._)([(0,F.Cb)({types:g,json:{write:!0}})],P.prototype,"pointSizeAlgorithm",void 0),(0,y._)([(0,F.Cb)({type:N,json:{write:!0}})],P.prototype,"colorModulation",void 0),(0,y._)([(0,F.Cb)({json:{write:!0},nonNullable:!0,type:Number})],P.prototype,"pointsPerInch",void 0),P=(0,y._)([(0,A.j)("esri.renderers.PointCloudRenderer")],P),(P||(P={})).fieldTransformTypeKebabDict=new D.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const K=P},23899:(Q,V,r)=>{r.d(V,{Z:()=>W});var Z,y=r(17626),D=r(58817),T=r(77712),F=(r(90912),r(55342)),U=r(76898),A=r(80573),G=r(10914),L=r(8029);let N=Z=class extends A.Z{constructor(R){super(R),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new Z({...this.cloneProperties(),field:(0,D.d9)(this.field),fieldTransformType:(0,D.d9)(this.fieldTransformType),stops:(0,D.d9)(this.stops),legendOptions:(0,D.d9)(this.legendOptions)})}};(0,y._)([(0,F.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],N.prototype,"type",void 0),(0,y._)([(0,T.Cb)({json:{write:!0},type:String})],N.prototype,"field",void 0),(0,y._)([(0,T.Cb)({type:G.I,json:{write:!0}})],N.prototype,"legendOptions",void 0),(0,y._)([(0,T.Cb)({type:A.Z.fieldTransformTypeKebabDict.apiValues,json:{type:A.Z.fieldTransformTypeKebabDict.jsonValues,read:A.Z.fieldTransformTypeKebabDict.read,write:A.Z.fieldTransformTypeKebabDict.write}})],N.prototype,"fieldTransformType",void 0),(0,y._)([(0,T.Cb)({type:[L.Z],json:{write:!0}})],N.prototype,"stops",void 0),N=Z=(0,y._)([(0,U.j)("esri.renderers.PointCloudStretchRenderer")],N);const W=N},98610:(Q,V,r)=>{r.d(V,{Z:()=>v});var N,y=r(17626),D=r(58817),T=r(77712),O=r(90912),F=r(55342),U=r(76898),A=r(80573),G=r(10914),L=r(91558),Z=r(86810);let W=N=class extends Z.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new N({description:this.description,label:this.label,values:(0,D.d9)(this.values),color:(0,D.d9)(this.color)})}};(0,y._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"description",void 0),(0,y._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"label",void 0),(0,y._)([(0,T.Cb)({type:[String],json:{write:!0}})],W.prototype,"values",void 0),(0,y._)([(0,T.Cb)({type:L.Z,json:{type:[O.z8],write:!0}})],W.prototype,"color",void 0),W=N=(0,y._)([(0,U.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],W);const R=W;var S;let j=S=class extends A.Z{constructor(M){super(M),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new S({...this.cloneProperties(),field:(0,D.d9)(this.field),fieldTransformType:(0,D.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,D.d9)(this.colorUniqueValueInfos),legendOptions:(0,D.d9)(this.legendOptions)})}};(0,y._)([(0,F.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],j.prototype,"type",void 0),(0,y._)([(0,T.Cb)({json:{write:!0},type:String})],j.prototype,"field",void 0),(0,y._)([(0,T.Cb)({type:A.Z.fieldTransformTypeKebabDict.apiValues,json:{type:A.Z.fieldTransformTypeKebabDict.jsonValues,read:A.Z.fieldTransformTypeKebabDict.read,write:A.Z.fieldTransformTypeKebabDict.write}})],j.prototype,"fieldTransformType",void 0),(0,y._)([(0,T.Cb)({type:[R],json:{write:!0}})],j.prototype,"colorUniqueValueInfos",void 0),(0,y._)([(0,T.Cb)({type:G.I,json:{write:!0}})],j.prototype,"legendOptions",void 0),j=S=(0,y._)([(0,U.j)("esri.renderers.PointCloudUniqueValueRenderer")],j);const v=j},2543:(Q,V,r)=>{r.d(V,{IJ:()=>N,m5:()=>j,vB:()=>M,w7:()=>R});var y=r(15861),D=r(84792),T=r(62208),O=r(21726),F=r(91179),U=r(93555),A=r(76391),G=r(61515);const L="Layer does not support extent calculation.";function Z(p,_){const I=p.geometry,g=p.toJSON(),x=g;if((0,T.pC)(I)&&(x.geometry=JSON.stringify(I),x.geometryType=(0,F.Ji)(I),x.inSR=I.spatialReference.wkid||JSON.stringify(I.spatialReference)),g.topFilter?.groupByFields&&(x.topFilter.groupByFields=g.topFilter.groupByFields.join(",")),g.topFilter?.orderByFields&&(x.topFilter.orderByFields=g.topFilter.orderByFields.join(",")),g.topFilter&&(x.topFilter=JSON.stringify(x.topFilter)),g.objectIds&&(x.objectIds=g.objectIds.join(",")),g.orderByFields&&(x.orderByFields=g.orderByFields.join(",")),g.outFields&&!(_?.returnCountOnly||_?.returnExtentOnly||_?.returnIdsOnly)?x.outFields=g.outFields.includes("*")?"*":g.outFields.join(","):delete x.outFields,g.outSR?x.outSR=g.outSR.wkid||JSON.stringify(g.outSR):I&&g.returnGeometry&&(x.outSR=x.inSR),g.returnGeometry&&delete g.returnGeometry,g.timeExtent){const P=g.timeExtent,{start:K,end:d}=P;null==K&&null==d||(x.time=K===d?K:`${K??"null"},${d??"null"}`),delete g.timeExtent}return x}function N(p,_,I,g){return W.apply(this,arguments)}function W(){return(W=(0,y.Z)(function*(p,_,I,g){const x=yield l(p,_,"json",g);return(0,G.p)(_,I,x.data),x})).apply(this,arguments)}function R(p,_,I){return S.apply(this,arguments)}function S(){return(S=(0,y.Z)(function*(p,_,I){return(0,T.pC)(_.timeExtent)&&_.timeExtent.isEmpty?{data:{objectIds:[]}}:l(p,_,"json",I,{returnIdsOnly:!0})})).apply(this,arguments)}function j(p,_,I){return v.apply(this,arguments)}function v(){return(v=(0,y.Z)(function*(p,_,I){return(0,T.pC)(_.timeExtent)&&_.timeExtent.isEmpty?{data:{count:0,extent:null}}:l(p,_,"json",I,{returnExtentOnly:!0,returnCountOnly:!0}).then(g=>{const x=g.data;if(x.hasOwnProperty("extent"))return g;if(x.features)throw new Error(L);if(x.hasOwnProperty("count"))throw new Error(L);return g})})).apply(this,arguments)}function M(p,_,I){return(0,T.pC)(_.timeExtent)&&_.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):l(p,_,"json",I,{returnIdsOnly:!0,returnCountOnly:!0})}function l(p,_,I,g={},x={}){const P="string"==typeof p?(0,O.mN)(p):p,K=_.geometry?[_.geometry]:[];return g.responseType="pbf"===I?"array-buffer":"json",(0,U.aX)(K,null,g).then(d=>{const a=d&&d[0];(0,T.pC)(a)&&((_=_.clone()).geometry=a);const E=(0,A.A)({...P.query,f:I,...x,...Z(_,x)});return(0,D.default)((0,O.v_)(P.path,"queryTopFeatures"),{...g,query:{...E,...g.query}})})}},70026:(Q,V,r)=>{r.d(V,{t:()=>T});var y=r(15861),D=r(84792);function T(F,U){return O.apply(this,arguments)}function O(){return(O=(0,y.Z)(function*(F,U){const{data:A}=yield(0,D.default)(F,{responseType:"image",...U});return A})).apply(this,arguments)}},66877:(Q,V,r)=>{r.d(V,{Z:()=>p});var y=r(15861),D=r(84792),T=r(26584),O=r(10699),F=r(30366),U=r(27422);function G(){return(G=(0,y.Z)(function*(d,a){const E=(0,F.p)(d);if(E instanceof Error)throw E;yield E.createImages(),(0,O.k_)(a);const{frames:h,width:B,height:s}=E,m=document.createElement("canvas");m.width=B,m.height=s;const C=m.getContext("2d",{willReadFrequently:!0}),b=[],w=[];for(const z of h){w.push((0,U.HA)(z.delay||100));const H=z.imageElement;C.globalCompositeOperation=0===z.blendOp?"copy":"source-over";const $=2===z.disposeOp?C.getImageData(z.left,z.top,z.width,z.height):void 0;C.drawImage(H,z.left,z.top);const k=C.getImageData(0,0,B,s);b.push(k),0===z.disposeOp||(1===z.disposeOp?C.clearRect(z.left,z.top,z.width,z.height):2===z.disposeOp&&C.putImageData($,z.left,z.top))}return{frameDurations:w,getFrame:z=>b[z],width:B,height:s}})).apply(this,arguments)}const L=[137,80,78,71,13,10,26,10];var W=r(57932),R=r(45872);function j(){return(j=(0,y.Z)(function*(d,a){const E=(0,R.p)(d),h=(0,R.d)(E,!0),{width:B,height:s}=E.lsd,m=document.createElement("canvas");m.width=B,m.height=s;const C=m.getContext("2d",{willReadFrequently:!0}),b=[],w=[];for(const z of h){w.push((0,U.HA)(z.delay||100));const H=new ImageData(z.patch,z.dims.width,z.dims.height),$=(0,W.E0)(H),k=3===z.disposalType?C.getImageData(z.dims.left,z.dims.top,z.dims.width,z.dims.height):void 0;C.drawImage($,z.dims.left,z.dims.top);const ee=C.getImageData(0,0,B,s);b.push(ee),1===z.disposalType||(2===z.disposalType?C.clearRect(z.dims.left,z.dims.top,z.dims.width,z.dims.height):3===z.disposalType&&C.putImageData(k,z.dims.left,z.dims.top))}return{frameDurations:w,getFrame:z=>b[z],width:B,height:s}})).apply(this,arguments)}const v=[71,73,70];class p{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(a){return this._resourceMap.get(a)??null}fetchResource(a,E){var h=this;return(0,y.Z)(function*(){const B=h._resourceMap.get(a);if(B)return{width:B.width,height:B.height};let s=h._inFlightResourceMap.get(a);return s?s.then(m=>({width:m.width,height:m.height})):(s=function g(d,a){return x.apply(this,arguments)}(a,E),h._inFlightResourceMap.set(a,s),s.then(m=>(h._inFlightResourceMap.delete(a),h._resourceMap.set(a,m),{width:m.width,height:m.height}),()=>({width:0,height:0})))})()}deleteResource(a){this._inFlightResourceMap.delete(a),this._resourceMap.delete(a)}}function I(){return(I=(0,y.Z)(function*(d,a){const E=window.URL.createObjectURL(d);try{const{data:h}=yield(0,D.default)(E,{...a,responseType:"image"});return h}catch(h){throw(0,O.D_)(h)?h:new T.Z("mapview-invalid-resource",`Could not fetch requested resource at ${E}`)}finally{window.URL.revokeObjectURL(E)}})).apply(this,arguments)}function x(){return x=(0,y.Z)(function*(d,a){const{arrayBuffer:E,mediaType:h}=yield function P(d,a){return K.apply(this,arguments)}(d,a),B="image/png"===h;return"image/gif"===h&&function l(d){if(!function M(d){const a=new Uint8Array(d);return!v.some((E,h)=>E!==a[h])}(d))return!1;const a=new DataView(d),E=a.getUint8(10);let h=13+(128&E?3*2**(1+(7&E)):0),B=0,s=!1;for(;!s;){switch(a.getUint8(h++)){case 33:if(!m())return!1;break;case 44:C();break;case 59:s=!0;break;default:return!1}if(B>1)return!0}function m(){switch(a.getUint8(h++)){case 249:!function b(){h++,h+=4,$()}();break;case 1:!function w(){B++,h++,h+=12,$()}();break;case 254:!function z(){$()}();break;case 255:!function H(){h++,h+=8,h+=3,$()}();break;default:return!1}return!0}function C(){B++,h+=8;const k=a.getUint8(h++);h+=128&k?3*2**(1+(7&k)):0,h++,$()}function $(){let k;for(;k=a.getUint8(h++);)h+=k}return!1}(E)?function S(d,a){return j.apply(this,arguments)}(E):B&&function N(d){if(!function Z(d){const a=new Uint8Array(d);return!L.some((E,h)=>E!==a[h])}(d))return!1;const a=new DataView(d),E=new Uint8Array(d);let h,B=8;do{const s=a.getUint32(B);if(h=String.fromCharCode.apply(String,Array.prototype.slice.call(E.subarray(B+4,B+8))),"acTL"===h)return!0;B+=12+s}while("IEND"!==h&&B<E.length);return!1}(E)?function A(d,a){return G.apply(this,arguments)}(E,a):function _(d,a){return I.apply(this,arguments)}(new Blob([E],{type:h}),a)}),x.apply(this,arguments)}function K(){return(K=(0,y.Z)(function*(d,a){let E;const h=";base64,";if(d.includes(h)){const B=d.indexOf(h),s=d.indexOf(h)+h.length,m=d.substring(s),C=atob(m),b=new Uint8Array(C.length);for(let w=0;w<C.length;w++)b[w]=C.charCodeAt(w);E={arrayBuffer:b.buffer,mediaType:d.substring(0,B).replace("data:","")}}else try{const B=yield(0,D.default)(d,{responseType:"array-buffer",...a});E={arrayBuffer:B.data,mediaType:B.getHeader("Content-Type")}}catch(B){if(!(0,O.D_)(B))throw new T.Z("mapview-invalid-resource",`Could not fetch requested resource at ${d}`)}return E})).apply(this,arguments)}},45e3:(Q,V,r)=>{r.d(V,{G:()=>T});var y=r(44589),D=r(67969);class T extends y.Z{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(F){const U=this.createRenderParams(F),{context:A,painter:G,profiler:L}=U;this._prevFBO=A.getBoundFramebufferObject(),L.recordContainerStart(this.name);const Z=this._getFbo(U),N=G.getRenderTarget();A.bindFramebuffer(Z),G.setRenderTarget(Z),A.setDepthWriteEnabled(!0),A.setColorMask(!0,!0,!0,!0),A.setClearColor(0,0,0,0),A.setClearDepth(1),A.clear(A.gl.COLOR_BUFFER_BIT|A.gl.DEPTH_BUFFER_BIT),A.setDepthWriteEnabled(!1);for(const W of this.children)W.beforeRender(F);for(const W of this.children)W.processRender(U);for(const W of this.children)W.afterRender(F);G.setRenderTarget(N),G.releaseFbo(Z),A.bindFramebuffer(this._prevFBO),G.beforeRenderLayer(U,this._clippingInfos?255:0,this.computedOpacity),Z.colorTexture&&(A.setStencilTestEnabled(!1),A.setStencilWriteMask(0),G.blitTexture(A,Z.colorTexture,D.cw.NEAREST)),G.compositeLayer(U,this.computedOpacity),L.recordContainerEnd()}createRenderParams(F){return{...super.createRenderParams(F),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(F){const{context:U,painter:A}=F,{width:G,height:L}=U.getViewport();return A.acquireFbo(G,L)}}},55746:(Q,V,r)=>{r.d(V,{k:()=>R,p:()=>S});var y=r(65389),D=r(61885),O=(r(8314),r(62208)),F=r(76279),U=r(5548),A=r(16669),G=r(52397);const L=(0,U.Ue)();function Z(j,v){return j<<16|v}function N(j){return(4294901760&j)>>>16}function W(j){return 65535&j}const R={getObjectId:j=>j.getObjectId(),getAttributes:j=>j.readAttributes(),getAttribute:(j,v)=>j.readAttribute(v),cloneWithGeometry:(j,v)=>j,getGeometry:j=>j.readHydratedGeometry(),getCentroid:(j,v)=>j.readCentroid()};class S extends A.J{constructor(v,M,l){super(v,M),this.featureAdapter=R,this.events=new D.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new y.Z(50),this._index=(0,F.r)(9,p=>({minX:this._storage.getXMin(p),minY:this._storage.getYMin(p),maxX:this._storage.getXMax(p),maxY:this._storage.getYMax(p)})),this.mode=l}get storeStatistics(){let v=0,M=0,l=0;return this.forEach(p=>{const _=p.readGeometry();_&&(M+=_.isPoint?1:_.lengths.reduce((I,g)=>I+g,0),l+=_.isPoint?1:_.lengths.length,v+=1)}),{featureCount:v,vertexCount:M,ringCount:l}}hasInstance(v){return this._featureSetsByInstance.has(v)}onTileData(v,M){if((0,O.Wi)(M.addOrUpdate))return M;if(M.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const p=M.addOrUpdate.getCursor();for(;p.next();){const _=p.getDisplayId();this.setComputedAttributes(this._storage,p,_,v.scale)}return M}this._featureSetsByInstance.set(M.addOrUpdate.instance,M.addOrUpdate);const l=M.addOrUpdate.getCursor();for(;l.next();)this._insertFeature(l,v.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),M}search(v){this._rebuildIndex();const M=v.id,l=this._indexSearchCache.find(g=>g.tileId===M);if((0,O.pC)(l))return l.readers;const p=new Map,_=this._searchIndex(v.bounds),I=[];for(const g of _){const x=this._storage.getInstanceId(g),P=N(x),K=W(x);p.has(P)||p.set(P,[]),p.get(P).push(K)}return p.forEach((g,x)=>{const P=this._featureSetsByInstance.get(x);I.push(G.t.from(P,g))}),this._indexSearchCache.enqueue({tileId:M,readers:I}),I}insert(v){const M=v.getCursor(),l=this._storage;for(;M.next();){const p=Z(M.instance,M.getIndex()),_=M.getObjectId(),I=this._objectIdToDisplayId.get(_)??this._storage.createDisplayId();M.setDisplayId(I),l.setInstanceId(I,p),this._objectIdToDisplayId.set(_,I)}this._featureSetsByInstance.set(v.instance,v),this._spatialIndexInvalid=!0}remove(v){const M=this._objectIdToDisplayId.get(v);if(!M)return;const l=this._storage.getInstanceId(M),p=W(l),_=N(l),I=this._featureSetsByInstance.get(_);this._objectIdToDisplayId.delete(v),this._storage.releaseDisplayId(M),I.removeAtIndex(p),I.isEmpty&&this._featureSetsByInstance.delete(_),this._spatialIndexInvalid=!0}forEach(v){this._objectIdToDisplayId.forEach(M=>{const l=this._storage.getInstanceId(M),p=this._lookupFeature(l);v(p)})}forEachUnsafe(v){this._objectIdToDisplayId.forEach(M=>{const l=this._storage.getInstanceId(M),p=N(l),_=W(l),I=this._getFeatureSet(p);I.setIndex(_),v(I)})}forEachInBounds(v,M){const l=this._searchIndex(v);for(const p of l){const _=this.lookupFeatureByDisplayId(p,this._storage);M((0,O.Wg)(_))}}forEachBounds(v,M){this._rebuildIndex();for(const l of v){if(!l.readGeometry())continue;const p=l.getDisplayId();(0,U.bZ)(L,this._storage.getXMin(p),this._storage.getYMin(p),this._storage.getXMax(p),this._storage.getYMax(p)),M(L)}}sweepFeatures(v,M,l){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((p,_)=>{v.has(p)||(M.releaseDisplayId(p),l&&l.unsetAttributeData(p),this._objectIdToDisplayId.delete(_))}),this.events.emit("changed")}sweepFeatureSets(v){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((M,l)=>{v.has(l)||this._featureSetsByInstance.delete(l)})}lookupObjectId(v,M){const l=this.lookupFeatureByDisplayId(v,M);return(0,O.Wi)(l)?null:l.getObjectId()}lookupDisplayId(v){return this._objectIdToDisplayId.get(v)}lookupFeatureByDisplayId(v,M){const l=M.getInstanceId(v);return this._lookupFeature(l)}lookupByDisplayIdUnsafe(v){const M=this._storage.getInstanceId(v),l=N(M),p=W(M),_=this._getFeatureSet(l);return _?(_.setIndex(p),_):null}_insertFeature(v,M){const l=this._storage,p=v.getObjectId(),_=Z(v.instance,v.getIndex());l.getInstanceId(v.getDisplayId());let I=this._objectIdToDisplayId.get(p);I||(I=l.createDisplayId(),this._objectIdToDisplayId.set(p,I),this._spatialIndexInvalid=!0),v.setDisplayId(I),l.setInstanceId(I,_),this.setComputedAttributes(l,v,I,M)}_searchIndex(v){return this._rebuildIndex(),this._index.search({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const v=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(M=>{const l=M.getCursor();for(;l.next();){const p=l.getDisplayId();this._storage.setBounds(p,l)&&v.push(p)}}):this._objectIdToDisplayId.forEach(M=>{const l=this._storage.getInstanceId(M);this._storage.setBounds(M,this._lookupFeature(l))&&v.push(M)}),this._index.clear(),this._index.load(v),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(v){const M=N(v),l=this._getFeatureSet(M);if(!l)return;const p=l.getCursor(),_=W(v);return p.setIndex(_),p}_getFeatureSet(v){return this._featureSetsByInstance.get(v)}}},16669:(Q,V,r)=>{r.d(V,{J:()=>L});var y=r(15861),D=r(8314),T=r(62208),O=r(84682),F=r(46679),U=r(63290);const G=r.e(2445).then(r.bind(r,22445));class L{constructor(N,W){this._canCacheExpressionValue=!1,this._sourceInfo=N,this._storage=W,this._bitsets={computed:W.getBitset(W.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(N,W){var R=this;return(0,y.Z)(function*(){const S=(0,O.Hg)(R._schema,W);if(R._schema=W,!W||(0,T.Wi)(S)||!(0,O.uD)(S,"attributes"))return;(0,D.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",S),R._bitsets.computed.clear(),N.targets[W.name]=!0;const j=W.attributes,v=[],M=[];for(const l in j){const p=j[l];switch(p.type){case"field":break;case"expression":v.push(R._createArcadeComputedField(p));break;case"label-expression":v.push(R._createLabelArcadeComputedField(p));break;case"statistic":M.push(p)}}R._computedFields=yield Promise.all(v),R._canCacheExpressionValue=!R._computedFields.some(l=>"expression"===l.type&&(0,T.pC)(l.expression)&&l.expression.referencesScale()),R._statisticFields=M})()}setComputedAttributes(N,W,R,S){const j=this._bitsets.computed;if(!this._canCacheExpressionValue||!j.has(R)){j.set(R);for(const v of this._computedFields){const M=this._evaluateField(W,v,S);switch(v.resultType){case"numeric":N.setComputedNumericAtIndex(R,v.fieldIndex,M);break;case"string":N.setComputedStringAtIndex(R,v.fieldIndex,M)}}}}_createArcadeComputedField(N){var W=this;return(0,y.Z)(function*(){const R=W._sourceInfo.spatialReference,S=W._sourceInfo.fieldsIndex;return{...N,expression:yield(0,F.Yi)(N.valueExpression,R,S)}})()}_createLabelArcadeComputedField(N){var W=this;return(0,y.Z)(function*(){const R=W._sourceInfo.spatialReference,S=W._sourceInfo.fieldsIndex,{createLabelFunction:j}=yield G,v=yield j(N.label,S,R);return{...N,builder:v}})()}_evaluateField(N,W,R){switch(W.type){case"label-expression":{const S=N.readArcadeFeature();return W.builder.evaluate(S)||""}case"expression":{const{expression:S}=W;return function A(Z,N,W){if((0,T.Wi)(Z))return null;const R=N.readArcadeFeature();try{return Z.evaluate({...W,$feature:R})}catch(S){return U.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",S),null}}(S,N,{$view:{scale:R}})}}}}},13112:(Q,V,r)=>{r.d(V,{Z:()=>G});var y=r(17626),D=r(80542),T=r(77712),U=(r(90912),r(85931),r(76898));let A=class extends D.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const L=this.get("tileStore.tileScheme.spatialReference");return L&&L.toJSON()||null}};(0,y._)([(0,T.Cb)({readOnly:!0})],A.prototype,"supportsTileUpdates",null),(0,y._)([(0,T.Cb)({constructOnly:!0})],A.prototype,"remoteClient",void 0),(0,y._)([(0,T.Cb)({constructOnly:!0})],A.prototype,"service",void 0),(0,y._)([(0,T.Cb)()],A.prototype,"spatialReference",null),(0,y._)([(0,T.Cb)({constructOnly:!0})],A.prototype,"tileInfo",void 0),(0,y._)([(0,T.Cb)({constructOnly:!0})],A.prototype,"tileStore",void 0),A=(0,y._)([(0,U.j)("esri.views.2d.layers.features.processors.BaseProcessor")],A);const G=A},52397:(Q,V,r)=>{r.d(V,{t:()=>D});var y=r(25208);class D extends y.s{static from(O,F){return new D(O.copy(),F)}constructor(O,F){super(y.s.createInstance(),O.fullSchema()),this._currentIndex=-1,this._reader=O,this._indices=F}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const O=new D(this._reader.copy(),this._indices);return O._currentIndex=this._currentIndex,O}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(O){this._reader.setArcadeSpatialReference(O)}attachStorage(O){this._reader.attachStorage(O)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(O){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(O,F){return this._reader.setComputedNumericAtIndex(F,0)}getComputedString(O){return this._reader.getComputedStringAtIndex(0)}setComputedString(O,F){return this._reader.setComputedStringAtIndex(0,F)}getComputedNumericAtIndex(O){return this._reader.getComputedNumericAtIndex(O)}setComputedNumericAtIndex(O,F){this._reader.setComputedNumericAtIndex(O,F)}getComputedStringAtIndex(O){return this._reader.getComputedStringAtIndex(O)}setComputedStringAtIndex(O,F){return this._reader.setComputedStringAtIndex(O,F)}transform(O,F,U,A){const G=this.copy();return G._reader=this._reader.transform(O,F,U,A),G}readAttribute(O,F=!1){return this._reader.readAttribute(O,F)}readAttributes(){return this._reader.readAttributes()}joinAttributes(O){return this._reader.joinAttributes(O)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(O){return this.readAttribute(O,!0)}hasField(O){return this._reader.hasField(O)}setField(O,F){return this._reader.setField(O,F)}keys(){return this._reader.keys()}castToText(O=!1){return this._reader.castToText(O)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(O){return this._reader.setDisplayId(O)}getGroupId(){return this._reader.getGroupId()}setGroupId(O){return this._reader.setGroupId(O)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(O){return this._reader.setIndex(O)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(O,F){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(Q,V,r)=>{r.d(V,{Z:()=>G});var y=r(17626),D=r(80542),T=r(77712),U=(r(90912),r(85931),r(76898));let A=class extends D.r{constructor(L){super(L),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(L){const Z=this.createTile(L);return Z.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(L.id,Z),Z}forceAttributeTextureUpload(){}forEachTile(L){this.tiles.forEach(L)}releaseTile(L){this.tiles.delete(L.key.id),this.disposeTile(L)}isUpdating(){let L=!0;return this.tiles.forEach(Z=>{L=L&&Z.isReady}),!L}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,y._)([(0,T.Cb)()],A.prototype,"layer",void 0),(0,y._)([(0,T.Cb)()],A.prototype,"layerView",void 0),(0,y._)([(0,T.Cb)()],A.prototype,"tileInfoView",void 0),(0,y._)([(0,T.Cb)()],A.prototype,"updating",null),A=(0,y._)([(0,U.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],A);const G=A},67802:(Q,V,r)=>{r.d(V,{Z:()=>K});var y=r(15861),D=r(17626),T=r(14517),F=(r(8314),r(10699)),U=r(77712),L=(r(90912),r(85931),r(76898)),Z=r(65401),N=r(37053),W=r(2584);const R=Math.PI/180;var M=r(90301),l=r(9598),p=r(58098);const _=(0,Z.Ue)(),I=[0,0],g=new p.Z(0,0,0,0);let P=class extends T.Z{constructor(d){var a;super(d),a=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,F.Ds)(function(){var E=(0,y.Z)(function*(h,B){if((0,F.k_)(B),!h.stationary||a.destroyed)return;const s=h.state,m=(0,N.C5)(s.spatialReference),C=a.hidpi?h.pixelRatio:1,b=a.imageNormalizationSupported&&s.worldScreenWidth&&s.worldScreenWidth<s.size[0],w=a.imageMaxWidth??0,z=a.imageMaxHeight??0;b?(I[0]=s.worldScreenWidth,I[1]=s.size[1]):a.imageRotationSupported?(I[0]=s.size[0],I[1]=s.size[1]):function j(d,a){const E=function S(d){return d*R}(a.rotation),h=Math.abs(Math.cos(E)),B=Math.abs(Math.sin(E)),[s,m]=a.size;return d[0]=Math.round(m*B+s*h),d[1]=Math.round(m*h+s*B),d}(I,s);const H=Math.floor(I[0]*C)>w||Math.floor(I[1]*C)>z,k=!a.imageNormalizationSupported&&m&&(s.extent.xmin<m.valid[0]||s.extent.xmax>m.valid[1]),ee=!H&&!k,q=a.imageRotationSupported?s.rotation:0,re=a.container.children.slice();if(ee){const Y=b?s.paddedViewState.center:s.center;a._imagePromise&&console.error("Image promise was not defined!"),a._imagePromise=a._singleExport(s,I,Y,s.resolution,q,C,B)}else{let Y=Math.min(w,z);k&&(Y=Math.min(s.worldScreenWidth,Y)),a._imagePromise=a._tiledExport(s,Y,C,B)}try{const Y=(yield a._imagePromise)??[];(0,F.k_)(B);const X=[];if(a._imagePromise=null,a.destroyed)return;a.bitmaps=Y;for(const J of re)Y.includes(J)||X.push(J.fadeOut().then(()=>{J.remove(),J.destroy()}));for(const J of Y)X.push(J.fadeIn());yield Promise.all(X)}catch(Y){a._imagePromise=null,(0,F.r9)(Y)}});return function(h,B){return E.apply(this,arguments)}}(),5e3),this.updateExports=(0,F.Ds)(function(){var E=(0,y.Z)(function*(h){const B=[];for(const s of a.container.children){if(!s.visible||!s.stage)return;B.push(h(s).then(()=>{s.invalidateTexture(),s.requestRender()}))}a._imagePromise=(0,F.as)(B).then(()=>a._imagePromise=null),yield a._imagePromise});return function(h){return E.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(d=>d.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(d,a,E,h,B,s){var m=this;return(0,y.Z)(function*(){const C=yield m.fetchSource(d,Math.floor(a*B),Math.floor(E*B),{rotation:h,pixelRatio:B,signal:s});(0,F.k_)(s);const b=new M.eY(null,{immutable:!0,requestRenderOnSourceChangedEnabled:!0});return b.x=d.xmin,b.y=d.ymax,b.resolution=d.width/a,b.rotation=h,b.pixelRatio=B,b.opacity=0,m.container.addChild(b),yield b.setSourceAsync(C,s),(0,F.k_)(s),b})()}_singleExport(d,a,E,h,B,s,m){var C=this;return(0,y.Z)(function*(){!function v(d,a,E,h){const[B,s]=a,[m,C]=h,b=.5*E;d[0]=B-b*m,d[1]=s-b*C,d[2]=B+b*m,d[3]=s+b*C}(_,E,h,a);const b=(0,Z.HH)(_,d.spatialReference);return[yield C._export(b,a[0],a[1],B,s,m)]})()}_tiledExport(d,a,E,h){const B=W.Z.create({size:a,spatialReference:d.spatialReference,scales:[d.scale]}),s=new l.Z(B),m=s.getTileCoverage(d);if(!m)return null;const C=[];return m.forEach((b,w,z,H)=>{g.set(b,w,z,0),s.getTileBounds(_,g);const $=(0,Z.HH)(_,d.spatialReference);C.push(this._export($,a,a,0,E,h).then(k=>(0!==H&&(g.set(b,w,z,H),s.getTileBounds(_,g),k.x=_[0],k.y=_[3]),k)))}),Promise.all(C)}};(0,D._)([(0,U.Cb)()],P.prototype,"_imagePromise",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"bitmaps",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"container",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"fetchSource",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"hidpi",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"imageMaxWidth",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"imageMaxHeight",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"imageRotationSupported",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"imageNormalizationSupported",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"requestUpdate",void 0),(0,D._)([(0,U.Cb)()],P.prototype,"updating",null),P=(0,D._)([(0,L.j)("esri.views.2d.layers.support.ExportStrategy")],P);const K=P},2282:(Q,V,r)=>{r.d(V,{hu:()=>U,yK:()=>G}),r(99770),r(993),(0,r(4794).c)();class F{constructor(j){this.message=j}toString(){return`AssertException: ${this.message}`}}function U(S,j){if(!S){j=j||"Assertion";const v=new Error(j).stack;throw new F(`${j} at ${v}`)}}function G(S,j,v,M){let l,p=(v[0]-S[0])/j[0],_=(M[0]-S[0])/j[0];p>_&&(l=p,p=_,_=l);let I=(v[1]-S[1])/j[1],g=(M[1]-S[1])/j[1];if(I>g&&(l=I,I=g,g=l),p>g||I>_)return!1;I>p&&(p=I),g<_&&(_=g);let x=(v[2]-S[2])/j[2],P=(M[2]-S[2])/j[2];return x>P&&(l=x,x=P,P=l),!(p>P||x>_||(P<_&&(_=P),_<0))}},38982:(Q,V,r)=>{r.d(V,{Br:()=>A,Fm:()=>R,N9:()=>j,RA:()=>v,Tc:()=>L,Ue:()=>Z,iC:()=>G,s9:()=>U,v:()=>S,xW:()=>W,zS:()=>N});var y=r(62208),D=r(99770),T=r(57596),O=r(67969),F=r(55086);function U(l,p,_="nearest",I=!1){const g=!(I&&"u8"===p.pixelType),x=g?O.Br.FLOAT:O.Br.UNSIGNED_BYTE,P=null==p.pixels||0===p.pixels.length?null:g?p.getAsRGBAFloat():p.getAsRGBA(),K=l.capabilities.textureFloat?.textureFloatLinear;return new F.x(l,{width:p.width,height:p.height,target:O.No.TEXTURE_2D,pixelFormat:O.VI.RGBA,internalFormat:l.type===T.zO.WEBGL2&&g?O.lP.RGBA32F:O.VI.RGBA,samplingMode:!K||"bilinear"!==_&&"cubic"!==_?O.cw.NEAREST:O.cw.LINEAR,dataType:x,wrapMode:O.e8.CLAMP_TO_EDGE,flipped:!1},P)}function A(l,p){const{spacing:_,offsets:I,coefficients:g,size:[x,P]}=p,K=_[0]>1,d={width:K?4*x:x,height:P,target:O.No.TEXTURE_2D,pixelFormat:O.VI.RGBA,internalFormat:l.type===T.zO.WEBGL2?O.lP.RGBA32F:O.VI.RGBA,dataType:O.Br.FLOAT,samplingMode:O.cw.NEAREST,wrapMode:O.e8.CLAMP_TO_EDGE,flipped:!1},a=new Float32Array(K?x*P*16:2*I.length);if(K&&null!=g)for(let E=0,h=0;E<g.length;E++)a[h++]=g[E],E%3==2&&(a[h++]=1);else for(let E=0;E<P;E++)for(let h=0;h<x;h++){const B=4*(E*x+h),s=2*(h*P+E);a[B]=I[s],a[B+1]=I[s+1],a[B+3]=-1===I[s]?0:1}return new F.x(l,d,a)}function G(l,p){return new F.x(l,{width:p.length/4,height:1,target:O.No.TEXTURE_2D,pixelFormat:O.VI.RGBA,internalFormat:O.VI.RGBA,dataType:O.Br.UNSIGNED_BYTE,samplingMode:O.cw.NEAREST,wrapMode:O.e8.CLAMP_TO_EDGE,flipped:!1},p)}function L(l,p,_,I=1,g=!0){return{u_flipY:g,u_applyTransform:!!l,u_opacity:I,u_transformSpacing:l?l.spacing:D.Z,u_transformGridSize:l?l.size:D.Z,u_targetImageSize:p,u_srcImageSize:_}}function Z(l,p){return{u_colormapOffset:p||0,u_colormapMaxIndex:l?l.length/4-1:0}}function N(l,p){return{u_scale:l,u_offset:p}}function W(l){return{u_bandCount:l.bandCount,u_minOutput:l.outMin,u_maxOutput:l.outMax,u_minCutOff:l.minCutOff,u_maxCutOff:l.maxCutOff,u_factor:l.factor,u_useGamma:l.useGamma,u_gamma:l.gamma,u_gammaCorrection:l.gammaCorrection}}function R(l){return{u_hillshadeType:l.hillshadeType,u_sinZcosAs:l.sinZcosAs,u_sinZsinAs:l.sinZsinAs,u_cosZs:l.cosZs,u_weights:l.weights,u_factor:l.factor,u_minValue:l.minValue,u_maxValue:l.maxValue}}function S(l,p){const _=l.gl,I=p.glName,g=new Map;if((0,y.Wi)(I))return g;const x=_.getProgramParameter(I,_.ACTIVE_UNIFORMS);let P;for(let K=0;K<x;K++)P=_.getActiveUniform(I,K),P&&g.set(P.name,{location:_.getUniformLocation(I,P.name),info:P});return g}function j(l,p,_){Object.keys(_).forEach(I=>{const g=p.get(I)||p.get(I+"[0]");g&&function M(l,p,_,I){if(null===I||null==_)return!1;const{info:g}=I;switch(g.type){case O.Se.FLOAT:g.size>1?l.setUniform1fv(p,_):l.setUniform1f(p,_);break;case O.Se.FLOAT_VEC2:l.setUniform2fv(p,_);break;case O.Se.FLOAT_VEC3:l.setUniform3fv(p,_);break;case O.Se.FLOAT_VEC4:l.setUniform4fv(p,_);break;case O.Se.FLOAT_MAT3:l.setUniformMatrix3fv(p,_);break;case O.Se.FLOAT_MAT4:l.setUniformMatrix4fv(p,_);break;case O.Se.INT:g.size>1?l.setUniform1iv(p,_):l.setUniform1i(p,_);break;case O.Se.BOOL:l.setUniform1i(p,_?1:0);break;case O.Se.INT_VEC2:case O.Se.BOOL_VEC2:l.setUniform2iv(p,_);break;case O.Se.INT_VEC3:case O.Se.BOOL_VEC3:l.setUniform3iv(p,_);break;case O.Se.INT_VEC4:case O.Se.BOOL_VEC4:l.setUniform4iv(p,_);break;default:return!1}}(l,I,_[I],g)})}function v(l,p,_,I){_.length===I.length&&(I.some(g=>null==g)||_.some(g=>null==g)||_.forEach((g,x)=>{p.setUniform1i(g,x),l.bindTexture(I[x],x)}))}},60863:(Q,V,r)=>{r.d(V,{d:()=>L});var y=r(15861),D=r(76210),T=r(23663),O=r(66554),F=r(85589);const G=(0,D.GH)(class extends D.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,O.u)(this,this.effectiveLocale)}connectedCallback(){(0,T.c)(this),(0,O.c)(this)}componentWillLoad(){var Z=this;return(0,y.Z)(function*(){yield(0,O.s)(Z)})()}disconnectedCallback(){(0,T.d)(this),(0,O.d)(this)}render(){const{el:Z,loading:N,messages:W}=this,R=Z.innerHTML.trim().length>0,S=N?(0,D.h)("calcite-loader",{label:W.loading}):null,j=R?(0,D.h)("div",{class:"content"},(0,D.h)("slot",null)):null;return(0,D.h)("div",{class:"scrim"},S,j)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function L(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(N=>{switch(N){case"calcite-scrim":customElements.get(N)||customElements.define(N,G);break;case"calcite-loader":customElements.get(N)||(0,F.d)()}})}L()},89251:(Q,V,r)=>{r.d(V,{C:()=>D,I:()=>F,M:()=>O,S:()=>T,a:()=>Z,g:()=>G,u:()=>L});var y=r(76210);const D={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},T={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},O=5,F={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},U="calcite-list-item-group",A="calcite-list-item";function G(N){const W=N.target.assignedElements({flatten:!0});return[...W.filter(j=>j?.matches(U)).map(j=>Array.from(j.querySelectorAll(A))).reduce((j,v)=>[...j,...v],[]),...W.filter(j=>j?.matches(A))]}function L(N){N.forEach(W=>{W.setPosition=N.indexOf(W)+1,W.setSize=N.length})}function Z(N,W=!1){return y.Z5.isBrowser?document.evaluate(W?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",N,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);