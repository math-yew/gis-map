"use strict";(self.webpackChunkarcgis=self.webpackChunkarcgis||[]).push([[2445],{22445:(T,h,t)=>{t.r(h),t.d(h,{createLabelFunction:()=>L,formatField:()=>v});var D=t(15861),f=t(26584),O=t(63290),M=t(62208),y=t(88411),P=t(15348),C=t(36630),p=t(86793),U=t(46679);const E=O.Z.getLogger("esri.layers.support.labelFormatUtils"),g={type:"simple",evaluate:()=>null},W={getAttribute:(r,n)=>r.field(n)};function L(r,n,e){return m.apply(this,arguments)}function m(){return(m=(0,D.Z)(function*(r,n,e){if(!r||!r.symbol||!n)return g;const l=r.where,u=(0,p.hV)(r),_=l?yield t.e(410).then(t.bind(t,10410)):null;let i;if("arcade"===u.type){const a=yield(0,U.WW)(u.expression,e,n);if((0,M.Wi)(a))return g;i={type:"arcade",evaluate(o){try{const s=a.evaluate({$feature:"attributes"in o?a.repurposeFeature(o):o});if(null!=s)return s.toString()}catch{E.error(new f.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:o,expression:u}))}return null},needsHydrationToEvaluate:()=>null==(0,p.el)(u.expression)}}else i={type:"simple",evaluate:a=>u.expression.replace(/{[^}]*}/g,o=>{const s=o.slice(1,-1),c=n.get(s);if(!c)return o;let d=null;return"attributes"in a?a&&a.attributes&&(d=a.attributes[c.name]):d=a.field(c.name),null==d?"":v(d,c)})};if(l){let a;try{a=_.WhereClause.create(l,n)}catch(s){return E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:l,error:s})),g}const o=i.evaluate;i.evaluate=s=>{const c="attributes"in s?void 0:W;try{if(a.testFeature(s,c))return o(s)}catch(d){E.error(new f.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:l,feature:s,error:d}))}return null}}return i})).apply(this,arguments)}function v(r,n){if(null==r)return"";const e=n.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const u=r;for(const _ of e.codedValues)if(_.code===u)return _.name}else if("range"===e.type){const u=+r;if(("range"in e?e.range[0]:e.minValue)<=u&&u<=("range"in e?e.range[1]:e.maxValue))return e.name}let l=r;return"date"===n.type||"esriFieldTypeDate"===n.type?l=(0,y.p6)(l,(0,y.Ze)("short-date")):(0,C.H7)(n)&&(l=(0,P.uf)(+l)),l||""}}}]);